{"version":3,"sources":["components/AutoWidth/AutoWidth.js","components/tooltip/tooltip.js","components/ScatterPlot/ScatterPlot.js","utils/collection.js","utils/format.js","constants.js","components/ConnectedScatterPlot/ConnectedScatterPlot.js","components/SmallMultipleConnected/SmallMultipleConnected.js","components/ConfigurePanel/ConfigurePanel.js","components/ColorLegend/ColorLegend.js","components/App/App.js","serviceWorker.js","index.js"],"names":["AutoWidth","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","width","defaultRenderWidth","debounceTime","updateWidth","debounce","bind","assertThisInitialized","window","addEventListener","parentMayResize","cancel","removeEventListener","ReactDOM","findDOMNode","domWidth","getResizeDOMNode","offsetWidth","setState","childToRender","child","children","React","cloneElement","react_default","a","createElement","className","Component","defaultProps","tableContent","entries","config","arguments","length","undefined","objectSpread","title","keys","keyFormat","k","valueFormat","v","output","concat","map","join","floatingTooltip","tooltipId","tt","d3","append","attr","html","hideTooltip","style","toNum","str","Number","replace","updatePosition","event","ttw","tth","wscrY","scrollY","wscrX","scrollX","curX","document","all","clientX","pageX","curY","clientY","pageY","ttleft","xOffset","innerWidth","tttop","yOffset","innerHeight","showTooltip","content","ScatterPlot","zooming","showTable","handleLassoSelect","handleZoom","handleZoomingToggle","handleMouseOver","handleMouseOut","handleMouseOverCircle","handleMouseOutCircle","setup","update","d","onFilter","_this$props","xAxis","yAxis","xFunc","yFunc","_this$props2","xScale","yScale","zoomTransform","transform","rescaleX","rescaleY","scale","highlightCircle","chart","selectAll","_this$props3","colorScale","colorBy","tooltipTextFunc","onHover","_this$props4","highlight","tooltip","el","_this$props5","voronoiDiagram","mouseRadius","mousePos","invert","site","find","data","_this$props6","plotHeight","plotWidth","radius","exactMouse","cRoot","root","g","underlay","classed","that","on","setupZoom","yAxisLabel","xAxisLabel","zoomable","zoom","scaleExtent","padding","left","top","updateChart","updateAxes","_this$props7","selectedData","hoverData","colorValue","_this$props8","binding","filter","datum","isfinite","key","merged","enter","merge","values","hoverFilter","includes","raise","collection","list","Array","isArray","some","r","exit","remove","_this$props9","xLabel","yLabel","_this$props10","text","bottom","_this2","_this$props11","height","ref","node","PureComponent","name","brushable","colorByFunc","x","y","addComputedProps","right","xExtent","xPad","Math","round","domain","range","yExtent","yPad","xValue","yValue","tickSizeOuter","ticks","pixelJitter","random","size","roundNumber","value","decimals","addCommas","nStr","split","x1","x2","rgx","test","formatNumber","number","thousand","METRICS","hdi","label","display","global","local","sortable","gdp","gni","efree","year","CONFIGS","dataDisplay","options","id","sortOrder","ConnectedScatterPlot","handleMouseover","handleMouseout","updateCanvas","dataFiltered","line","lineWidth","lineBinding","updateLine","select","dataBackground","sizeScale","lineCanvas","color","opacity","ctx","canvas","getContext","context","setTransform","clearRect","translate","strokeStyle","toString","forEach","country","index","beginPath","stroke","canvasStyle","zFunc","devicePixelRatio","curve","tension","changeInclude","EXTENT","SmallMultipleScatter","chartData","zLabel","xMetric","yMetric","dataGrouped","components_AutoWidth_AutoWidth","components_ConnectedScatterPlot_ConnectedScatterPlot","renderChart","sort","sortData","threshold","filterData","_tooltipData","defineProperty","ConfigurePanel","toggle","click","dropdownOpen","selectIndex","selectedId","dropdownId","prevState","option","optionIndex","onClick","dropdownState","items","reactstrap_es","isOpen","caret","renderDropdown","ColorLegend","textAnchor","cx","cy","fill","years","dotWidth","renderYear","STRING_COLUMNS","ROUND_COLUMNS","gdp_per_cap","NULL_STRING","normalizeMinMax","normAttr","minData","maxData","NaN","processData","population","App","focusYear","scatterHover","configs","handleScatterHover","handleConfigClick","configId","valueId","changesPath","process","getData","then","groupData","region","processGroupedData","_this$state","displayData","components_ScatterPlot_ScatterPlot","_this$state2","_tooltipData2","_this$state3","_configs$dataDisplay$","_configs$dataDisplay$2","slicedToArray","SmallMultipleConnected_SmallMultipleConnected","components_ConfigurePanel_ConfigurePanel","components_ColorLegend_ColorLegend","href","target","rel","sm","cite","md","renderScatterGNIvsKDI","renderScatterGNIvsEfree","renderConfigPanel","renderLegend","renderSmallMult","Boolean","location","hostname","match","render","components_App_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.78ee456f.chunk.js","sourcesContent":["/**\n * @copyright 2018 Zymergen\n */\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport debounce from 'lodash.debounce';\n\nconst propTypes = {\n  children: PropTypes.object,\n\n  /* The amount of delay between debounced calls (default: 100) */\n  debounceTime: PropTypes.number,\n\n  /* If set, the default width is set to this value and the child is\n     rendered. If null, the child is not rendered until a width is provided */\n  defaultRenderWidth: PropTypes.number,\n\n  /* If true, the component checks on componentDidUpdate to see if it needs to resize */\n  parentMayResize: PropTypes.bool,\n};\n\nconst defaultProps = {\n  parentMayResize: false,\n  defaultRenderWidth: null,\n  debounceTime: 100,\n};\n\n/**\n * Component for automatically setting a width prop to the DOM\n * node of the first child. Note that checking offsetWidth is a\n * somewhat expensive operation (forced reflow), so try and leave\n * `parentMayResize` false if you are having performance issues.\n *\n * Example usage:\n * <AutoWidth>\n *   <MyComponent />\n * </AutoWidth>\n *\n * MyComponent gets a `width` prop set.\n *\n */\nclass AutoWidth extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      width: props.defaultRenderWidth,\n    };\n\n    if (props.debounceTime) {\n      this.updateWidth = debounce(this.updateWidth.bind(this), props.debounceTime);\n    } else {\n      this.updateWidth = this.updateWidth.bind(this);\n    }\n  }\n\n  componentDidMount() {\n    this.updateWidth();\n    window.addEventListener('resize', this.updateWidth);\n  }\n\n  componentDidUpdate() {\n    const { parentMayResize } = this.props;\n\n    // have to update width of the parent can cause a resize without a window resize\n    // e.g. something collapses or expands.\n    if (parentMayResize) {\n      this.updateWidth();\n    }\n  }\n\n  componentWillUnmount() {\n    this.updateWidth.cancel();\n    window.removeEventListener('resize', this.updateWidth);\n  }\n\n  getResizeDOMNode() {\n    return ReactDOM.findDOMNode(this);\n  }\n\n  // Call set state to update the width so it starts an update of the child component\n  updateWidth() {\n    const { width } = this.state;\n    const domWidth = this.getResizeDOMNode().offsetWidth;\n    if (width !== domWidth) {\n      this.setState({\n        width: domWidth,\n      });\n    }\n  }\n\n  render() {\n    const { width } = this.state;\n\n    if (process.env.NODE_ENV !== 'production' && React.Children.count(this.props.children) > 1) {\n      console.warn('AutoWidth only works with a single child element.');\n    }\n\n    const child = this.props.children;\n    let childToRender;\n\n    // if we have a child and a width is provided, render the child with the width as a prop\n    if (child && width != null) {\n      childToRender = React.cloneElement(child, { width: this.state.width });\n    }\n\n    // we rely on this div getting the full width from the browser's layout\n    // and read its offsetWidth to set as the width to the child component.\n    return <div className=\"auto-width\">{childToRender}</div>;\n  }\n}\n\nAutoWidth.propTypes = propTypes;\nAutoWidth.defaultProps = defaultProps;\n\nexport default AutoWidth;\n","import * as d3 from \"d3\";\nimport \"./tooltip.scss\";\n\n/**\n * Format an object into a table for tooltip output.\n *\n * @param {Object} entries Object of items to display as a tooltip table.\n * @param {Object} config Configuration object that modifies the table generation.\n *  Possible values are:\n *  title: optional title for table\n *  keys: if provided, only display data from entries associated with these keys.\n *    This also can be used to specify the order of the data in the table.\n *    If not provided, all keys from `entries` are displayed.\n *  keyFormat: formatting function that takes a key and outputs a string to be displayed.\n *  valueFormat: formatting function that takes a value and outputs a string to be displayed.\n */\nexport function tableContent(entries, config = {}) {\n  const defaultConfig = {\n    title: null,\n    keys: null,\n    keyFormat: k => k,\n    valueFormat: v => v\n  };\n  config = { ...defaultConfig, ...config };\n  config.keys = config.keys || Object.keys(entries);\n  let output = \"<div>\";\n  if (config.title) {\n    output += `<h2>${config.title}</h2>`;\n  }\n  output += \"<table><tbody>\";\n  const rows = config.keys.map(k => {\n    if (k in entries) {\n      return `<tr><td>${config.keyFormat(k)}</td><td>${config.valueFormat(\n        entries[k]\n      )}</td></tr>`;\n    }\n    return \"\";\n  });\n  output += rows.join(\"\");\n  output += \"</tbody></table></div>\";\n  return output;\n}\n\n/**\n * Format an object into a series of spans for tooltip output.\n *\n * @param {Object} entries\n * @param {Function} keyFormat\n */\nexport function spanContent(entries) {\n  const content = Object.keys(entries).map(k => {\n    return `<span class='name'>${k}: </span><span class='value'>${\n      entries[k]\n    }</span>`;\n  });\n\n  return content.join(\"<br/>\");\n}\n\n/*\n * Creates tooltip with provided id that\n * floats on top of visualization.\n * Most styling is expected to come from CSS\n * so check out bubble_chart.scss for more details.\n */\nexport function floatingTooltip(tooltipId, width) {\n  // Local variable to hold tooltip div for\n  // manipulation in other functions.\n  var tt = d3\n    .select(\"body\")\n    .append(\"div\")\n    .attr(\"class\", \"tooltip\")\n    .attr(\"id\", tooltipId)\n    .html(\"\");\n\n  // Set a width if it is provided.\n  if (width) {\n    tt.style(\"width\", width);\n  }\n\n  // Initially it is hidden.\n  hideTooltip();\n\n  /*\n   * Display tooltip with provided content.\n   *\n   * content is expected to be HTML string.\n   *\n   * event is d3.event for positioning.\n   */\n  function showTooltip(content, event) {\n    tt.style(\"opacity\", 1.0)\n      .style(\"pointer-events\", \"all\")\n      .html(content);\n\n    updatePosition(event);\n  }\n\n  /*\n   * Hide the tooltip div.\n   */\n  function hideTooltip() {\n    tt.style(\"opacity\", 0.0).style(\"pointer-events\", \"none\");\n  }\n\n  function toNum(str) {\n    return Number(str.replace(/[^\\d.-]/g, \"\"));\n  }\n\n  /*\n   * Figure out where to place the tooltip\n   * based on d3 mouse evenggt.\n   */\n  function updatePosition(event) {\n    var xOffset = 35;\n    var yOffset = -60;\n\n    var ttw = toNum(tt.style(\"width\"));\n    var tth = toNum(tt.style(\"height\"));\n\n    var wscrY = window.scrollY;\n    var wscrX = window.scrollX;\n\n    var curX = document.all ? event.clientX + wscrX : event.pageX;\n    var curY = document.all ? event.clientY + wscrY : event.pageY;\n    var ttleft =\n      curX - wscrX + xOffset * 2 + ttw > window.innerWidth\n        ? curX - ttw - xOffset\n        : curX + xOffset;\n\n    if (ttleft < wscrX + xOffset) {\n      ttleft = wscrX + xOffset;\n    }\n\n    var tttop =\n      curY - wscrY + yOffset * 2 + tth > window.innerHeight\n        ? curY - tth - yOffset * 2\n        : curY + yOffset;\n\n    if (tttop < wscrY + yOffset) {\n      tttop = curY + yOffset;\n    }\n\n    tt.style(\"top\", tttop + \"px\").style(\"left\", ttleft + \"px\");\n  }\n\n  return {\n    showTooltip: showTooltip,\n    hideTooltip: hideTooltip,\n    updatePosition: updatePosition\n  };\n}\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport addComputedProps from \"react-computed-props\";\nimport isfinite from \"lodash.isfinite\";\nimport * as d3 from \"d3\";\n\nimport { includesAny } from \"../../utils/collection\";\nimport { floatingTooltip } from \"../tooltip/tooltip\";\n\nimport \"./ScatterPlot.scss\";\n\nfunction chartProps(props) {\n  const {\n    data,\n    height,\n    width,\n    xFunc,\n    yFunc,\n    colorByFunc,\n    colorScale,\n    exactMouse\n  } = props;\n\n  const padding = {\n    top: 20,\n    right: 20,\n    bottom: 50,\n    left: 60\n  };\n\n  const plotWidth = width - padding.left - padding.right;\n  const plotHeight = height - padding.top - padding.bottom;\n\n  const xExtent = d3.extent(data, xFunc);\n  const xPad = Math.round((xExtent[1] - xExtent[0]) / 20);\n  const xScale = d3\n    .scaleLinear()\n    .domain([xExtent[0] - xPad, xExtent[1] + xPad])\n    .range([0, plotWidth]);\n\n  const yExtent = d3.extent(data, yFunc);\n  const yPad = (yExtent[1] - yExtent[0]) / 20;\n  const yScale = d3\n    .scaleLinear()\n    .domain([yExtent[0] - yPad, yExtent[1] + yPad])\n    .range([plotHeight, 0]);\n\n  const xValue = d => xScale(xFunc(d));\n  const yValue = d => yScale(yFunc(d));\n  const colorValue = d =>\n    colorByFunc(d) ? colorScale(colorByFunc(d)) : \"#888\";\n\n  const yAxis = d3\n    .axisLeft(yScale)\n    .tickSizeOuter(0)\n    .ticks(4);\n  const xAxis = d3\n    .axisBottom(xScale)\n    .tickSizeOuter(0)\n    .ticks(4);\n\n  let voronoiDiagram = d3.voronoi()([]);\n\n  if (!exactMouse) {\n    const pixelJitter = () => Math.random() - 0.5;\n    voronoiDiagram = d3\n      .voronoi()\n      .x(d => xValue(d) + pixelJitter())\n      .y(d => yValue(d) + pixelJitter())\n      .size([plotWidth, plotHeight])(data);\n  }\n\n  const mouseRadius = plotWidth / 10;\n\n  return {\n    plotWidth,\n    plotHeight,\n    padding,\n    colorValue,\n    xScale,\n    yScale,\n    xValue,\n    yValue,\n    xAxis,\n    yAxis,\n    voronoiDiagram,\n    mouseRadius\n  };\n}\n\n/**\n * Scatter Plot component used to visualize two variables in the same chart.\n * Provides brushing capabilities for selecting subsets of data points.\n * Also provides zooming and hovering capabilities.\n */\nclass ScatterPlot extends PureComponent {\n  static propTypes = {\n    /**\n     * Boolean to enable/disable brushing interaction.\n     */\n    brushable: PropTypes.bool,\n\n    /**\n     * Function to extract attribute used to color dots with.\n     * Used in conjunction with `colorScale` a la:\n     * `colorScale(colorByFunc(d))`.\n     */\n    colorByFunc: PropTypes.func,\n\n    /**\n     * D3-style color scale function to color dots by.\n     */\n    colorScale: PropTypes.func,\n\n    /**\n     * Array of data objects to plot. x,y, and color values\n     * are extracted from each object in this array using\n     * xFunc, yFunc, and colorByFunc, respectively.\n     */\n    data: PropTypes.array,\n\n    /**\n     * A nice UX feature is when mousing over a plot,\n     * the nearest point to the mouse cursor can be detected\n     * using a voronoi diagram and its tooltip can be displayed\n     * without having to explicitly mouse onto that point.\n     * Unfortunately, these plots are flexible enough to allow data\n     * that is un-voronoi-able... causing crashing behavior. So,\n     * this approach (in certain contexts) needs to be abandoned.\n     * This boolean controls if 'exact mouse' (no voronoi) should\n     * be used for mouse-over or not.\n     * @default true\n     */\n    exactMouse: PropTypes.bool,\n\n    /**\n     * Height of component\n     */\n    height: PropTypes.number,\n\n    /**\n     * Values being hovered on.\n     */\n    hoverData: PropTypes.shape({\n      values: PropTypes.array\n    }),\n\n    /**\n     * Unique name of plot. Used for\n     * maximization interaction.\n     */\n    name: PropTypes.string,\n\n    /**\n     * Callback for brushing interaction.\n     */\n    onFilter: PropTypes.func,\n\n    /**\n     *\n     */\n    onHover: PropTypes.func,\n\n    /**\n     * Radius of dots.\n     * @default 4\n     */\n    radius: PropTypes.number,\n\n    /**\n     * Values selected.\n     */\n    selectedData: PropTypes.shape({\n      values: PropTypes.array\n    }),\n\n    /**\n     * Function used to generate tooltip text.\n     * function is provided data object.\n     */\n    tooltipTextFunc: PropTypes.func,\n\n    /**\n     * Width of component.\n     */\n    width: PropTypes.number,\n\n    /**\n     * Accessor function for x value of data object to display.\n     */\n    xFunc: PropTypes.func,\n\n    /**\n     * x-axis label.\n     */\n    xLabel: PropTypes.string,\n\n    /**\n     * Accessor function for y value of data object to display.\n     */\n    yFunc: PropTypes.func,\n\n    /**\n     * y-axis label.\n     */\n    yLabel: PropTypes.string,\n\n    /**\n     * Boolean controlling if chart is zoomable or not.\n     * @default true\n     */\n    zoomable: PropTypes.bool\n  };\n\n  static defaultProps = {\n    data: [],\n    name: \"scatter\",\n    brushable: true,\n    colorByFunc: () => {},\n    height: 400,\n    hoverData: null,\n    selectedData: null,\n    width: 300,\n    onFilter: () => {},\n    colorScale: () => \"#ddd\",\n    xFunc: d => d.x,\n    yFunc: d => d.y,\n    radius: 4,\n    xLabel: \"\",\n    yLabel: \"\",\n    zoomable: false,\n    exactMouse: false\n  };\n\n  /**\n   *\n   */\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      zooming: false,\n      showTable: false\n    };\n\n    this.handleLassoSelect = this.handleLassoSelect.bind(this);\n    this.handleZoom = this.handleZoom.bind(this);\n    this.handleZoomingToggle = this.handleZoomingToggle.bind(this);\n    this.handleMouseOver = this.handleMouseOver.bind(this);\n    this.handleMouseOut = this.handleMouseOut.bind(this);\n    this.handleMouseOverCircle = this.handleMouseOverCircle.bind(this);\n    this.handleMouseOutCircle = this.handleMouseOutCircle.bind(this);\n  }\n\n  /**\n   * When the react component mounts, setup the d3 vis\n   */\n  componentDidMount() {\n    this.setup();\n  }\n\n  /**\n   * When the react component updates, update the d3 vis\n   */\n  componentDidUpdate() {\n    this.update();\n  }\n\n  /**\n   *\n   */\n  handleLassoSelect(d) {\n    this.props.onFilter(d);\n  }\n\n  /**\n   *\n   */\n  handleZoom() {\n    const { xAxis, yAxis, xFunc, yFunc } = this.props;\n    let { xScale, yScale } = this.props;\n\n    // record zoom transform to be used in\n    // other interaction callbacks.\n    this.zoomTransform = d3.event.transform;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    this.yAxis.call(yAxis.scale(yScale));\n\n    this.xAxis.call(xAxis.scale(xScale));\n\n    const xValue = d => xScale(xFunc(d));\n    const yValue = d => yScale(yFunc(d));\n\n    this.highlightCircle(null);\n\n    this.chart\n      .selectAll(\".dot\")\n      .attr(\"cx\", xValue)\n      .attr(\"cy\", yValue);\n  }\n\n  /**\n   *\n   */\n  handleZoomingToggle() {\n    const { zooming } = this.state;\n    this.setState({\n      zooming: !zooming\n    });\n  }\n\n  /**\n   *\n   */\n  highlightCircle(d) {\n    const {\n      xFunc,\n      yFunc,\n      colorScale,\n      colorBy,\n      tooltipTextFunc,\n      onHover\n    } = this.props;\n    let { xScale, yScale } = this.props;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    if (!d) {\n      this.highlight.style(\"display\", \"none\");\n      this.tooltip.hideTooltip();\n    } else {\n      this.highlight\n        .style(\"display\", \"\")\n        .style(\"stroke\", colorScale(d[colorBy]))\n        .attr(\"cx\", xScale(xFunc(d)))\n        .attr(\"cy\", yScale(yFunc(d)));\n      if (tooltipTextFunc) {\n        this.tooltip.showTooltip(tooltipTextFunc(d), d3.event);\n      }\n    }\n\n    if (onHover) {\n      onHover(d);\n    }\n  }\n\n  /**\n   *\n   */\n  handleMouseOver(el) {\n    const { voronoiDiagram, mouseRadius } = this.props;\n\n    let mousePos = d3.mouse(el);\n    mousePos = this.zoomTransform.invert(mousePos);\n    const site = voronoiDiagram.find(mousePos[0], mousePos[1], mouseRadius);\n    this.highlightCircle(site && site.data);\n  }\n\n  /**\n   *\n   */\n  handleMouseOut() {\n    this.highlightCircle(null);\n  }\n\n  /**\n   *\n   */\n  handleMouseOverCircle(d) {\n    this.highlightCircle(d);\n  }\n\n  /**\n   *\n   */\n  handleMouseOutCircle() {\n    this.highlightCircle(null);\n  }\n\n  /**\n   *\n   */\n  setup() {\n    const { plotHeight, plotWidth, radius, exactMouse } = this.props;\n    const cRoot = d3.select(this.root);\n\n    this.g = cRoot.append(\"g\");\n\n    this.underlay = this.g\n      .append(\"rect\")\n      .classed(\"underlay\", true)\n      .attr(\"width\", plotWidth)\n      .attr(\"height\", plotHeight)\n      .style(\"fill\", \"white\");\n\n    const that = this;\n    if (!exactMouse) {\n      this.underlay\n        .on(\"mousemove\", function(d) {\n          that.handleMouseOver(this, d);\n        })\n        .on(\"mouseleave\", function() {\n          that.handleMouseOut();\n        });\n    }\n\n    this.setupZoom(this.underlay);\n\n    this.chart = this.g.append(\"g\").classed(\"chart-group\", true);\n    this.tooltip = floatingTooltip(\"_tooltip\");\n\n    this.highlight = this.g\n      .append(\"circle\")\n      .attr(\"class\", \"highlight-circle\")\n      .attr(\"r\", radius + 2)\n      .style(\"fill\", \"none\")\n      .style(\"display\", \"none\");\n\n    this.xAxis = this.g.append(\"g\").classed(\"x-axis\", true);\n    this.yAxis = this.g.append(\"g\").classed(\"y-axis\", true);\n    this.yAxisLabel = this.g\n      .append(\"text\")\n      .attr(\"class\", \"axis-label\")\n      .attr(\"text-anchor\", \"middle\");\n\n    this.xAxisLabel = this.g\n      .append(\"text\")\n      .attr(\"class\", \"axis-label\")\n      .attr(\"text-anchor\", \"middle\");\n\n    this.update();\n  }\n\n  /**\n   *\n   */\n  setupZoom(underlay) {\n    const { zoomable } = this.props;\n    this.zoomTransform = d3.zoomIdentity;\n\n    if (zoomable) {\n      this.zoom = d3\n        .zoom()\n        .scaleExtent([1 / 4, 8])\n        .on(\"zoom\", this.handleZoom);\n\n      underlay.call(this.zoom);\n    }\n  }\n\n  /**\n   *\n   */\n  update() {\n    const { padding } = this.props;\n    this.g.attr(\"transform\", `translate(${padding.left} ${padding.top})`);\n\n    this.updateChart();\n    this.updateAxes();\n  }\n\n  /**\n   *\n   */\n  updateChart() {\n    const {\n      data,\n      selectedData,\n      hoverData,\n      xFunc,\n      yFunc,\n      colorValue,\n      radius,\n      exactMouse\n    } = this.props;\n\n    let { xScale, yScale } = this.props;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    const xValue = d => xScale(xFunc(d));\n    const yValue = d => yScale(yFunc(d));\n\n    const binding = this.chart\n      .selectAll(\".dot\")\n      .data(\n        data.filter(datum => isfinite(xFunc(datum)) && isfinite(yFunc(datum))),\n        datum => datum.key\n      );\n\n    const enter = binding\n      .enter()\n      .append(\"circle\")\n      .classed(\"dot\", true);\n\n    const merged = enter.merge(binding);\n\n    merged\n      .attr(\"cx\", xValue)\n      .attr(\"cy\", yValue)\n      .attr(\"r\", radius)\n      .attr(\"fill\", colorValue);\n\n    if (exactMouse) {\n      merged\n        .on(\"mouseover\", this.handleMouseOverCircle)\n        .on(\"mouseout\", this.handleMouseOutCircle);\n    } else {\n      merged.style(\"pointer-events\", \"none\");\n    }\n\n    merged\n      .classed(\"highlight\", false)\n      .classed(\"dim\", false)\n      .classed(\"selected\", false);\n\n    if (hoverData && hoverData.values.length > 0) {\n      const hoverFilter = d => hoverData.values.includes(d.key);\n\n      merged\n        .classed(\"highlight\", false)\n        .classed(\"dim\", true)\n        .filter(hoverFilter)\n        .classed(\"highlight\", true)\n        .classed(\"dim\", false)\n        .raise()\n        .filter(hoverFilter)\n        .classed(\"selected\", true)\n        .raise();\n    }\n\n    if (selectedData && selectedData.values && selectedData.values.length > 0) {\n      merged\n        .filter(\n          d =>\n            d[selectedData.key] &&\n            includesAny(d[selectedData.key], selectedData.values)\n        )\n        .classed(\"highlight\", true)\n        .classed(\"dim\", false)\n        .raise();\n    }\n\n    binding.exit().remove();\n  }\n\n  /**\n   *\n   */\n  updateAxes() {\n    const {\n      xAxis,\n      yAxis,\n      xLabel,\n      yLabel,\n      plotHeight,\n      plotWidth,\n      padding\n    } = this.props;\n\n    let { xScale, yScale } = this.props;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    this.xAxis\n      .attr(\"transform\", `translate(${0}, ${plotHeight})`)\n      .call(xAxis.scale(xScale));\n\n    this.yAxis.call(yAxis.scale(yScale));\n\n    this.yAxisLabel\n      .attr(\n        \"transform\",\n        `rotate(270) translate(${-plotHeight / 2} ${-padding.left + 18})`\n      )\n      .text(yLabel);\n\n    this.xAxisLabel\n      .attr(\n        \"transform\",\n        `translate(${plotWidth / 2} ${plotHeight +\n          padding.top +\n          padding.bottom / 3})`\n      )\n      .text(xLabel);\n  }\n\n  /**\n   *\n   */\n  render() {\n    const { height, width } = this.props;\n\n    // keeps plot from overlapping on small screens - as\n    // elements are absolutely positioned within.\n    const style = { height: height };\n\n    return (\n      <div className=\"ScatterPlot\">\n        <div className=\"chart-brush\" style={style}>\n          <svg\n            className=\"chart\"\n            ref={node => {\n              this.root = node;\n            }}\n            height={height}\n            width={width}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default addComputedProps(chartProps)(ScatterPlot);\n","/**\n * Returns true if collection includes any in list\n * @param  {Array} collection Array of values to search\n * @param  {Array} list values to check for\n * @returns {Bool} true if collection contains any\n *  of the elements in list\n */\nexport function includesAny(collection, list) {\n  if (!collection || !list) {\n    return false;\n  }\n\n  if (!Array.isArray(collection)) {\n    collection = [collection];\n  }\n\n  // array.some tests whether at least one element\n  // in the array passes the test\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\n  return collection.some(r => list.includes(r));\n}\n","/**\n * Round a value to a given number of decimals\n * @param {Number} value Value to round.\n * @param {Number} decimals decimals to round to.\n * @return {Number} rounded number\n */\nexport function roundNumber(value, decimals) {\n  return Number(`${Math.round(`${value}e${decimals}`)}e-${decimals}`);\n}\n\n/**\n * Add commas to a number to make it look better\n * @param {Number} nStr to add commas to\n * @return {String} number with commas\n */\nexport function addCommas(nStr) {\n  if (!nStr) {\n    nStr = 0;\n  }\n  nStr = +nStr + \"\";\n  const x = nStr.split(\".\");\n  let x1 = x[0];\n  const x2 = x.length > 1 ? `.${x[1]}` : \"\";\n  const rgx = /(\\d+)(\\d{3})/;\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, \"$1,$2\");\n  }\n  return x1 + x2;\n}\n\n/**\n * @param {Number} number Number to format\n * @return {String} number with commas and M/B instaed of million / billion\n */\nexport function formatNumber(number, thousand = false) {\n  if (!number) {\n    number = 0;\n  }\n  if (number > 999999999) {\n    number = roundNumber(number / 1000000000.0, 1);\n    return `${addCommas(number)}B`;\n  } else if (number > 999999) {\n    number = roundNumber(number / 1000000.0, 1);\n    return `${addCommas(number)}M`;\n  } else if (number > 999 && thousand) {\n    number = roundNumber(number / 1000.0, 1);\n    return `${addCommas(number)}K`;\n  }\n  return addCommas(number);\n}\n","export const METRICS = {\n  hdi: {\n    label: \"Human Development Index\",\n    display: \"hdi\",\n    global: \"hdi_norm\",\n    local: \"hdi_norm_local\",\n    sortable: \"hdi_max\"\n  },\n  gdp: {\n    label: \"GDP per Capita\",\n    display: \"gdp_per_cap\",\n    global: \"gdp_norm\",\n    local: \"gdp_norm_local\",\n    sortable: \"gdp_max\"\n  },\n  gni: {\n    label: \"GNI per Capita\",\n    display: \"gni_per_cap\",\n    global: \"gni_norm\",\n    local: \"gni_norm_local\",\n    sortable: \"gni_max\"\n  },\n  efree: {\n    label: \"Economic Freedom\",\n    display: \"efree\",\n    global: \"efree_norm\",\n    local: \"efree_norm_local\",\n    sortable: \"efree_max\"\n  },\n  year: { label: \"Year\", display: \"year\" }\n};\n\nexport const CONFIGS = {\n  dataDisplay: {\n    options: [\n      { label: \"HDI vs GDP\", id: \"hdi_gdp\" },\n      { label: \"Economic Freedom vs GDP\", id: \"efree_gdp\" },\n      { label: \"HDI vs Economic Freedom\", id: \"hdi_efree\" }\n    ]\n  },\n  sortOrder: {\n    options: [\n      { label: \"By GDP\", id: \"gdp\" },\n      { label: \"By HDI\", id: \"hdi\" },\n      { label: \"By Economic Freedom\", id: \"efree\" },\n      { label: \"Alphabetically\", id: \"alpha\" }\n    ]\n  },\n  scale: {\n    options: [\n      { label: \"Country-level\", id: \"local\" },\n      { label: \"Global\", id: \"global\" }\n    ]\n  }\n};\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport addComputedProps from \"react-computed-props\";\nimport * as d3 from \"d3\";\nimport isfinite from \"lodash.isfinite\";\nimport { floatingTooltip } from \"../tooltip/tooltip\";\n\nimport \"./ConnectedScatterPlot.scss\";\n\n/**\n *\n * @param {*} props\n */\nfunction chartProps(props) {\n  const { data, xFunc, yFunc, zFunc, colorScale, height, width, scale } = props;\n\n  let { xExtent, yExtent } = props;\n\n  const padding = {\n    top: 20,\n    right: 20,\n    bottom: 40,\n    left: 40\n  };\n\n  // scaling for retina displays\n  let sizeScale = 1.0;\n  if (window.devicePixelRatio) {\n    sizeScale = window.devicePixelRatio;\n  }\n\n  const radius = scale === \"local\" ? 5 : 2;\n  const lineWidth = scale === \"local\" ? 3 : 1;\n\n  const plotWidth = width - padding.left - padding.right;\n  const plotHeight = height - padding.top - padding.bottom;\n\n  const dataFiltered = data.filter(\n    datum => isfinite(xFunc(datum)) && isfinite(yFunc(datum))\n  );\n\n  xExtent = xExtent || d3.extent(data, xFunc);\n  const xScale = d3\n    .scaleLinear()\n    .domain(xExtent)\n    .range([0, plotWidth]);\n\n  yExtent = yExtent || d3.extent(data, yFunc);\n  const yScale = d3\n    .scaleLinear()\n    .domain(yExtent)\n    .range([plotHeight, 0]);\n\n  const xValue = d => xScale(xFunc(d));\n  const yValue = d => yScale(yFunc(d));\n\n  const line = d3\n    .line()\n    .x(xValue)\n    .y(yValue)\n    .curve(d3.curveCardinal.tension(0.3));\n  const lineCanvas = d3\n    .line()\n    .x(xValue)\n    .y(yValue)\n    .curve(d3.curveCardinal.tension(0.3));\n\n  let colorValue = d => \"#ddd\";\n  if (colorScale) {\n    colorValue = d => colorScale(zFunc(d));\n  }\n\n  let voronoiDiagram = null;\n\n  if (data && data.length > 0) {\n    const pixelJitter = () => Math.random() - 0.5;\n    voronoiDiagram = d3\n      .voronoi()\n      .x(d => xValue(d) + pixelJitter())\n      .y(d => yValue(d) + pixelJitter())\n      .size([plotWidth, plotHeight])(dataFiltered);\n  }\n\n  const mouseRadius = plotWidth / 3;\n\n  const yAxis = d3.axisLeft(yScale).tickSizeOuter(0);\n  const xAxis = d3.axisBottom(xScale).tickSizeOuter(0);\n\n  return {\n    dataFiltered,\n    line,\n    lineCanvas,\n    padding,\n    plotHeight,\n    plotWidth,\n    xScale,\n    yScale,\n    xValue,\n    yValue,\n    colorValue,\n    radius,\n    lineWidth,\n    voronoiDiagram,\n    mouseRadius,\n    xAxis,\n    yAxis,\n    sizeScale\n  };\n}\n\n/**\n *\n */\nclass ConnectedScatterPlot extends PureComponent {\n  static propTypes = {\n    data: PropTypes.array,\n    name: PropTypes.string,\n    radius: PropTypes.number,\n    scale: PropTypes.string,\n    xFunc: PropTypes.func,\n    yFunc: PropTypes.func,\n    xLabel: PropTypes.string,\n    yLabel: PropTypes.string,\n    xExtent: PropTypes.array,\n    yExtent: PropTypes.array,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    tooltipTextFunc: PropTypes.func\n  };\n\n  static defaultProps = {\n    data: [],\n    radius: 4,\n    height: 300,\n    name: \"\",\n    xFunc: d => d.x,\n    yFunc: d => d.x,\n    xLabel: \"\",\n    yLabel: \"\",\n    tooltipTextFunc: d => \"\",\n    colorScale: () => \"#ddd\"\n  };\n\n  /**\n   *\n   */\n  constructor(props) {\n    super(props);\n\n    this.handleMouseover = this.handleMouseover.bind(this);\n    this.handleMouseout = this.handleMouseout.bind(this);\n  }\n\n  /**\n   * When the react component mounts, setup the d3 vis\n   */\n  componentDidMount() {\n    this.setup();\n  }\n\n  /**\n   * When the react component updates, update the d3 vis\n   */\n  componentDidUpdate() {\n    this.update();\n  }\n\n  /**\n   *\n   */\n  handleMouseover(el) {\n    const { voronoiDiagram, mouseRadius } = this.props;\n\n    let mousePos = d3.mouse(el);\n    mousePos = this.zoomTransform.invert(mousePos);\n    const site = voronoiDiagram.find(mousePos[0], mousePos[1], mouseRadius);\n    this.highlightCircle(site && site.data);\n  }\n\n  /**\n   *\n   */\n  handleMouseout(el) {\n    this.highlightCircle(null);\n  }\n\n  /**\n   *\n   */\n  highlightCircle(d) {\n    const {\n      xFunc,\n      yFunc,\n      colorScale,\n      colorBy,\n      tooltipTextFunc,\n      onHover\n    } = this.props;\n    let { xScale, yScale } = this.props;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    if (!d) {\n      this.highlight.style(\"display\", \"none\");\n      this.tooltip.hideTooltip();\n    } else {\n      this.highlight\n        .style(\"display\", \"\")\n        .style(\"stroke\", colorScale(d[colorBy]))\n        .attr(\"cx\", xScale(xFunc(d)))\n        .attr(\"cy\", yScale(yFunc(d)));\n      if (tooltipTextFunc) {\n        this.tooltip.showTooltip(tooltipTextFunc(d), d3.event);\n      }\n    }\n\n    if (onHover) {\n      onHover(d);\n    }\n  }\n\n  /**\n   *\n   */\n  setup() {\n    const { plotWidth, plotHeight, radius } = this.props;\n\n    this.zoomTransform = d3.zoomIdentity;\n\n    const cRoot = d3.select(this.root);\n\n    this.g = cRoot.append(\"g\");\n\n    const that = this;\n    this.underlay = this.g\n      .append(\"rect\")\n      .classed(\"underlay\", true)\n      .attr(\"width\", plotWidth)\n      .attr(\"height\", plotHeight)\n      .style(\"fill\", \"white\")\n      .style(\"opacity\", 0.001)\n      .on(\"mousemove\", function(d) {\n        that.handleMouseover(this, d);\n      })\n      .on(\"mouseleave\", function() {\n        that.handleMouseout();\n      });\n    this.chart = this.g.append(\"g\").classed(\"chart-group\", true);\n    this.tooltip = floatingTooltip(\"_tooltip\");\n\n    this.highlight = this.g\n      .append(\"circle\")\n      .attr(\"class\", \"highlight-circle\")\n      .attr(\"r\", radius + 2)\n      .style(\"fill\", \"none\")\n      .style(\"pointer-events\", \"none\")\n      .style(\"display\", \"none\");\n\n    this.xAxis = this.g\n      .append(\"g\")\n      .classed(\"x-axis\", true)\n      .style(\"pointer-events\", \"none\");\n\n    this.xAxis.append(\"line\").classed(\"bar\", true);\n    this.xAxis.append(\"text\").classed(\"low\", true);\n    this.xAxis.append(\"text\").classed(\"high\", true);\n\n    this.yAxis = this.g\n      .append(\"g\")\n      .classed(\"y-axis\", true)\n      .style(\"pointer-events\", \"none\");\n\n    this.yAxis.append(\"line\").classed(\"bar\", true);\n    this.yAxis.append(\"text\").classed(\"low\", true);\n    this.yAxis.append(\"text\").classed(\"high\", true);\n\n    this.yAxisLabel = this.g\n      .append(\"text\")\n      .attr(\"class\", \"axis-label\")\n      .attr(\"text-anchor\", \"middle\");\n\n    this.xAxisLabel = this.g\n      .append(\"text\")\n      .attr(\"class\", \"axis-label\")\n      .attr(\"text-anchor\", \"middle\");\n\n    this.update();\n  }\n\n  /**\n   *\n   */\n  update() {\n    const { padding } = this.props;\n    this.g.attr(\"transform\", `translate(${padding.left} ${padding.top})`);\n\n    this.updateChart();\n    this.updateAxes();\n    this.updateCanvas();\n  }\n\n  /**\n   *\n   */\n  updateLine() {\n    const { dataFiltered, line, lineWidth } = this.props;\n    const lineBinding = this.chart.selectAll(\".line\").data([dataFiltered]);\n\n    const lineEnter = lineBinding\n      .enter()\n      .append(\"path\")\n      .classed(\"line\", true);\n\n    const lineMerged = lineEnter.merge(lineBinding);\n    lineMerged\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"#888\")\n      // .attr(\"stroke\", \"url(#svgGradient)\")\n      .attr(\"stroke-width\", lineWidth)\n      .attr(\"stroke-linejoin\", \"round\")\n      .attr(\"stroke-linecap\", \"round\")\n      .attr(\"pointer-events\", \"none\")\n      .attr(\"d\", line);\n\n    lineBinding.exit().remove();\n  }\n\n  /**\n   *\n   */\n  updateChart() {\n    const { dataFiltered, xValue, yValue, colorValue, radius } = this.props;\n\n    this.updateLine();\n\n    const binding = this.chart\n      .selectAll(\".dot\")\n      .data(dataFiltered, datum => datum.key);\n\n    const enter = binding\n      .enter()\n      .append(\"circle\")\n      .classed(\"dot\", true);\n\n    const merged = enter.merge(binding);\n\n    merged\n      .attr(\"cx\", xValue)\n      .attr(\"cy\", yValue)\n      .attr(\"r\", radius)\n      .attr(\"fill\", colorValue);\n    merged.style(\"pointer-events\", \"none\");\n\n    binding.exit().remove();\n  }\n\n  updateAxes() {\n    const { xLabel, yLabel, plotHeight, plotWidth, padding } = this.props;\n\n    this.xAxis.attr(\"transform\", `translate(${0}, ${plotHeight})`);\n    this.xAxis.attr(\"font-size\", 10).attr(\"fill\", \"none\");\n    this.yAxis.attr(\"font-size\", 10).attr(\"fill\", \"none\");\n\n    this.xAxis\n      .select(\".bar\")\n      .attr(\"x1\", 0)\n      .attr(\"x2\", plotWidth)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", 0)\n      .style(\"stroke-width\", 1)\n      .style(\"stroke\", \"black\")\n      .style(\"fill\", \"none\");\n\n    this.xAxis\n      .select(\".low\")\n      .attr(\"y\", 9)\n      .attr(\"fill\", \"#333\")\n      .attr(\"dy\", \"0.6em\")\n      .text(\"low\");\n\n    this.xAxis\n      .select(\".high\")\n      .attr(\"y\", 9)\n      .attr(\"x\", plotWidth)\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"fill\", \"#333\")\n      .attr(\"dy\", \"0.6em\")\n      .text(\"high\");\n\n    this.yAxis\n      .select(\".bar\")\n      .attr(\"x1\", 0)\n      .attr(\"x2\", 0)\n      .attr(\"y1\", 0)\n      .attr(\"y2\", plotHeight)\n      .style(\"stroke-width\", 1)\n      .style(\"stroke\", \"black\")\n      .style(\"fill\", \"none\");\n\n    this.yAxis\n      .select(\".low\")\n      .attr(\"y\", 9)\n      .attr(\"fill\", \"#333\")\n      .attr(\"dy\", \"0.6em\")\n      .attr(\n        \"transform\",\n        `rotate(270) translate(${-plotHeight} ${-padding.left + 18})`\n      )\n      .text(\"low\");\n\n    this.yAxis\n      .select(\".high\")\n      .attr(\"y\", 9)\n      .attr(\"x\", 0)\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"fill\", \"#333\")\n      .attr(\"dy\", \"0.6em\")\n      .attr(\"transform\", `rotate(270) translate(${0} ${-padding.left + 18})`)\n      .text(\"high\");\n\n    this.yAxisLabel\n      .attr(\n        \"transform\",\n        `rotate(270) translate(${-plotHeight / 2} ${-padding.left + 18})`\n      )\n      .text(yLabel);\n\n    this.xAxisLabel\n      .attr(\n        \"transform\",\n        `translate(${plotWidth / 2} ${plotHeight +\n          padding.top +\n          padding.bottom / 3})`\n      )\n      .text(xLabel);\n  }\n\n  /**\n   * Rerenders the chart on the canvas. Recomputes data sorting and scales.\n   */\n  updateCanvas() {\n    const {\n      dataBackground,\n      sizeScale,\n      width,\n      height,\n      padding,\n      lineWidth,\n      scale,\n      lineCanvas\n    } = this.props;\n\n    const color = d3.color(\"#ccc\");\n    color.opacity = scale === \"global\" ? 0.7 : 0.15;\n\n    // get context\n    const ctx = this.canvas.getContext(\"2d\");\n\n    lineCanvas.context(ctx);\n\n    // Reset transform to ensure scale setting is appropriate.\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.scale(sizeScale, sizeScale);\n    // draw main bars\n    ctx.clearRect(0, 0, width, height);\n    // have some padding\n    ctx.translate(padding.left, padding.top);\n    ctx.lineWidth = lineWidth;\n    ctx.strokeStyle = color.toString();\n    dataBackground.forEach((country, index) => {\n      ctx.beginPath();\n      lineCanvas(country.values);\n      ctx.stroke();\n    });\n  }\n\n  /**\n   *\n   */\n  updateAxesExact() {\n    const {\n      xAxis,\n      yAxis,\n      xLabel,\n      yLabel,\n      plotHeight,\n      plotWidth,\n      padding,\n      xScale,\n      yScale\n    } = this.props;\n\n    this.xAxis\n      .attr(\"transform\", `translate(${0}, ${plotHeight})`)\n      .call(xAxis.scale(xScale));\n\n    this.yAxis.call(yAxis.scale(yScale));\n\n    this.yAxisLabel\n      .attr(\n        \"transform\",\n        `rotate(270) translate(${-plotHeight / 2} ${-padding.left + 18})`\n      )\n      .text(yLabel);\n\n    this.xAxisLabel\n      .attr(\n        \"transform\",\n        `translate(${plotWidth / 2} ${plotHeight +\n          padding.top +\n          padding.bottom / 3})`\n      )\n      .text(xLabel);\n  }\n\n  /**\n   *\n   */\n  render() {\n    const { name, height, width, sizeScale } = this.props;\n\n    let canvasStyle = {\n      width: width,\n      height: height\n    };\n\n    return (\n      <div className=\"ConnectedScatterPlot\">\n        <h4 className=\"title\">{name}</h4>\n        <div className=\"chart-container\">\n          <canvas\n            className=\"chart-canvas\"\n            ref={node => {\n              this.canvas = node;\n            }}\n            style={canvasStyle}\n            width={width * sizeScale}\n            height={height * sizeScale}\n          />\n          <svg\n            className=\"chart\"\n            ref={node => {\n              this.root = node;\n            }}\n            height={height}\n            width={width}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default addComputedProps(chartProps, {\n  changeInclude: [\n    \"dataGrouped\",\n    \"scale\",\n    \"sortOrder\",\n    \"width\",\n    \"height\",\n    \"xMetric\",\n    \"yMetric\"\n  ]\n})(ConnectedScatterPlot);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport addComputedProps from \"react-computed-props\";\nimport * as d3 from \"d3\";\nimport ConnectedScatterPlot from \"../ConnectedScatterPlot/ConnectedScatterPlot\";\nimport isfinite from \"lodash.isfinite\";\n\nimport { tableContent } from \"../tooltip/tooltip\";\nimport { formatNumber } from \"../../utils/format\";\n\nimport \"./SmallMultipleConnected.scss\";\nimport AutoWidth from \"../AutoWidth/AutoWidth\";\n\nimport { METRICS } from \"../../constants\";\n\n/**\n *\n * @param {*} data\n * @param {*} sortOrder\n * @param {*} xFunc\n * @param {*} yFunc\n * @param {*} zFunc\n */\nfunction sortData(data, sortOrder, xFunc, yFunc, zFunc) {\n  if (METRICS[sortOrder]) {\n    data = data.sort((x, y) =>\n      d3.descending(\n        x[METRICS[sortOrder].sortable],\n        y[METRICS[sortOrder].sortable]\n      )\n    );\n  } else {\n    data = data.sort((x, y) => d3.ascending(x.key, y.key));\n  }\n\n  return data;\n}\n\n/**\n *\n * @param {*} data\n * @param {*} threshold\n * @param {*} xFunc\n * @param {*} yFunc\n */\nfunction filterData(data, threshold, xFunc, yFunc) {\n  return data.filter(country => {\n    const validYears = country.values.filter(year => {\n      return isfinite(xFunc(year)) && isfinite(yFunc(year));\n    });\n\n    return validYears.length > threshold;\n  });\n}\n\n/**\n *\n * @param {*} props\n */\nfunction chartProps(props) {\n  const { xMetric, yMetric, scale, sortOrder } = props;\n  let { dataGrouped } = props;\n\n  const zMetric = \"year\";\n  const xLabel = METRICS[xMetric].label;\n  const yLabel = METRICS[yMetric].label;\n  const zLabel = METRICS[zMetric].label;\n\n  const xFunc = d => d[METRICS[xMetric][scale]];\n  const yFunc = d => d[METRICS[yMetric][scale]];\n  const zFunc = d => d[METRICS[zMetric].display];\n\n  dataGrouped = filterData(dataGrouped, 4, xFunc, yFunc);\n\n  dataGrouped = sortData(dataGrouped, sortOrder, xFunc, yFunc, zFunc);\n\n  // var colorScale = d3\n  //   .scaleSequential(d3.interpolatePlasma)\n  //   .domain([2020, 1995]);\n\n  const tooltipTextFunc = d => {\n    const tooltipData = {\n      [xLabel]: d[METRICS[xMetric].display],\n      [yLabel]: d[METRICS[yMetric].display]\n    };\n    return tableContent(tooltipData, {\n      title: `${d.year}`,\n      valueFormat: formatNumber\n    });\n  };\n\n  return {\n    dataGrouped,\n    xLabel,\n    yLabel,\n    zLabel,\n    xFunc,\n    yFunc,\n    zFunc,\n    tooltipTextFunc\n  };\n}\n\nconst EXTENT = [-0.1, 1.1];\n\n/**\n *\n */\nclass SmallMultipleScatter extends Component {\n  static propTypes = {\n    dataGrouped: PropTypes.array,\n    scale: PropTypes.string,\n    sortOrder: PropTypes.string,\n    colorScale: PropTypes.func\n  };\n\n  static defaultProps = {\n    dataGrouped: [],\n    xMetric: \"hdi\",\n    yMetric: \"gni\",\n    scale: \"global\",\n    colorScale: d => \"#333\"\n  };\n\n  renderChart(chartData) {\n    const {\n      xFunc,\n      yFunc,\n      zFunc,\n      xLabel,\n      yLabel,\n      zLabel,\n      tooltipTextFunc,\n      xMetric,\n      yMetric,\n      scale,\n      colorScale,\n      dataGrouped\n    } = this.props;\n    return (\n      <div key={chartData.key} className=\"small-multiple\">\n        <AutoWidth>\n          <ConnectedScatterPlot\n            key={chartData.key}\n            name={chartData.key}\n            data={chartData.values}\n            xFunc={xFunc}\n            yFunc={yFunc}\n            zFunc={zFunc}\n            xLabel={xLabel}\n            yLabel={yLabel}\n            zLabel={zLabel}\n            xExtent={EXTENT}\n            yExtent={EXTENT}\n            tooltipTextFunc={tooltipTextFunc}\n            colorScale={colorScale}\n            xMetric={xMetric}\n            yMetric={yMetric}\n            scale={scale}\n            dataBackground={dataGrouped}\n          />\n        </AutoWidth>\n      </div>\n    );\n  }\n\n  /**\n   *\n   */\n  render() {\n    const { dataGrouped } = this.props;\n    return (\n      <div className=\"SmallMultipleConnected\">\n        {dataGrouped.map(d => this.renderChart(d))}\n      </div>\n    );\n  }\n}\n\nexport default addComputedProps(chartProps)(SmallMultipleScatter);\n","import React, { Component } from \"react\";\nimport {\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from \"reactstrap\";\n\nimport { CONFIGS } from \"../../constants\";\n\nimport \"./ConfigurePanel.scss\";\n\nclass ConfigurePanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = this.toggle.bind(this);\n    this.click = this.click.bind(this);\n\n    this.state = {\n      dataDisplay: {\n        dropdownOpen: false,\n        selectIndex: 0,\n        selectedId: CONFIGS.dataDisplay.options[0].id\n      },\n      sortOrder: {\n        dropdownOpen: false,\n        selectIndex: 0,\n        selectedId: CONFIGS.sortOrder.options[0].id\n      },\n      scale: {\n        dropdownOpen: false,\n        selectIndex: 0,\n        selectedId: CONFIGS.scale.options[0].id\n      }\n    };\n  }\n\n  toggle(dropdownId) {\n    this.setState(prevState => {\n      const data = prevState[dropdownId];\n      data.dropdownOpen = !data.dropdownOpen;\n      return { [dropdownId]: data };\n    });\n  }\n\n  click(dropdownId, option, optionIndex) {\n    const { onClick } = this.props;\n    this.setState(prevState => {\n      const data = prevState[dropdownId];\n      data.selectIndex = optionIndex;\n      data.selectedId = option.id;\n      return { [dropdownId]: data };\n    });\n\n    if (onClick) {\n      onClick(dropdownId, option.id);\n    }\n  }\n\n  renderDropdown(dropdownId) {\n    const dropdownState = this.state[dropdownId];\n    const data = CONFIGS[dropdownId];\n    const items = data.options.map((d, index) => (\n      <DropdownItem\n        key={d.id}\n        onClick={this.click.bind(this, dropdownId, d, index)}\n      >\n        {d.label}\n      </DropdownItem>\n    ));\n\n    const display = data.options[dropdownState.selectIndex];\n\n    return (\n      <Dropdown\n        isOpen={this.state[dropdownId].dropdownOpen}\n        toggle={this.toggle.bind(this, dropdownId)}\n      >\n        <DropdownToggle caret>{display.label}</DropdownToggle>\n        <DropdownMenu>{items}</DropdownMenu>\n      </Dropdown>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"ConfigurePanel\">\n        Displaying {this.renderDropdown(\"dataDisplay\")} sorted{\" \"}\n        {this.renderDropdown(\"sortOrder\")} using a{\" \"}\n        {this.renderDropdown(\"scale\")} scale.\n      </div>\n    );\n  }\n}\nexport default ConfigurePanel;\n","import React, { Component } from \"react\";\nimport addComputedProps from \"react-computed-props\";\nimport * as d3 from \"d3\";\n\nimport \"./ColorLegend.scss\";\n\nfunction chartProps(props) {\n  const { domain } = props;\n  const years = d3.range(domain[0], domain[1] + 1, 1);\n  const radius = 8;\n  const spacer = 10;\n  const dotWidth = (radius * 2 + spacer) * years.length;\n  const xScale = d3\n    .scalePoint()\n    .domain(years)\n    .range([0, dotWidth]);\n  return { dotWidth, years, radius, xScale };\n}\n\nclass ColorLegend extends Component {\n  static defaultProps = {\n    height: 40\n  };\n\n  renderYear(year) {\n    const { xScale, radius, colorScale } = this.props;\n    return (\n      <g key={year} transform={`translate(${xScale(year)},${0})`}>\n        <text className=\"title\" textAnchor=\"middle\">\n          {year}\n        </text>\n        <circle cx={0} cy={13} r={radius} fill={colorScale(year)} />\n      </g>\n    );\n  }\n\n  render() {\n    const { years, dotWidth, height, radius } = this.props;\n    return (\n      <div className=\"ColorLegend\">\n        <span className=\"align-middle\">Legend:</span>{\" \"}\n        <svg className=\"dots\" width={dotWidth + radius * 4} height={height}>\n          <g transform={`translate(${radius * 2},${height / 4})`}>\n            {years.map(year => this.renderYear(year))}\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nexport default addComputedProps(chartProps)(ColorLegend);\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport { Container, Row, Col } from \"reactstrap\";\n\nimport AutoWidth from \"../AutoWidth/AutoWidth\";\nimport ScatterPlot from \"../ScatterPlot/ScatterPlot\";\nimport { tableContent } from \"../tooltip/tooltip\";\nimport { formatNumber, roundNumber } from \"../../utils/format\";\nimport { METRICS } from \"../../constants\";\nimport SmallMultipleConnected from \"../SmallMultipleConnected/SmallMultipleConnected\";\nimport ConfigurePanel from \"../ConfigurePanel/ConfigurePanel\";\nimport ColorLegend from \"../ColorLegend/ColorLegend\";\n\nimport \"./App.scss\";\n\nfunction getData() {\n  const changesPath = `${process.env.PUBLIC_URL}/data/gov_data_year.csv`;\n  return d3.csv(changesPath);\n}\n\nconst STRING_COLUMNS = [\"country\", \"iso3c\", \"iso2c\", \"region\", \"sub-region\"];\nconst ROUND_COLUMNS = {\n  gdp_per_cap: { decimals: 0 }\n};\nconst NULL_STRING = \"NA\";\n\nfunction normalizeMinMax(data, attr, normAttr) {\n  const minData = d3.min(data, d => d[attr]);\n  const maxData = d3.max(data, d => d[attr]);\n  data.forEach(datum => {\n    datum[normAttr] = datum[attr]\n      ? (datum[attr] - minData) / (maxData - minData)\n      : NaN;\n  });\n\n  return data;\n}\n\n/**\n *\n * @param {*} data\n */\nfunction processData(data) {\n  data.forEach(datum => {\n    Object.keys(datum).forEach(key => {\n      if (!STRING_COLUMNS.includes(key)) {\n        datum[key] = datum[key] === NULL_STRING ? null : +datum[key];\n      }\n      if (ROUND_COLUMNS[key]) {\n        datum[key] = datum[key]\n          ? roundNumber(datum[key], ROUND_COLUMNS[key].decimals)\n          : null;\n      }\n    });\n\n    datum.key = `${datum.country}:${datum.year}`;\n  });\n\n  // FILTER LOW POPULATION\n  const MIN_POP = 5000000;\n  data = data.filter(d => d.population > MIN_POP);\n\n  normalizeMinMax(data, \"hdi\", \"hdi_norm\");\n  normalizeMinMax(data, \"gni_per_cap\", \"gni_norm\");\n  normalizeMinMax(data, \"efree\", \"efree_norm\");\n  normalizeMinMax(data, \"gdp_per_cap\", \"gdp_norm\");\n  normalizeMinMax(data, \"gini\", \"gini_norm\");\n\n  // nest by country to get normalized by country\n  const dataByCountry = d3\n    .nest()\n    .key(d => d.country)\n    .entries(data);\n\n  dataByCountry.forEach(country => {\n    normalizeMinMax(country.values, \"gdp_per_cap\", \"gdp_norm_local\");\n    normalizeMinMax(country.values, \"gni_per_cap\", \"gni_norm_local\");\n    normalizeMinMax(country.values, \"hdi\", \"hdi_norm_local\");\n    normalizeMinMax(country.values, \"efree\", \"efree_norm_local\");\n    normalizeMinMax(country.values, \"gini\", \"gini_norm_local\");\n  });\n\n  return data;\n}\n\n/**\n *\n * @param {*} data\n */\nfunction groupData(data) {\n  let dataGrouped = d3\n    .nest()\n    .key(d => d.country)\n    .entries(data);\n  return dataGrouped;\n}\n\n/**\n *\n * @param {*} data\n */\nfunction processGroupedData(data) {\n  data.forEach(country => {\n    country.region = country.values[0].region;\n    country[METRICS[\"gdp\"].sortable] = d3.max(\n      country.values,\n      d => d[METRICS[\"gdp\"][\"display\"]]\n    );\n    country[METRICS[\"hdi\"].sortable] = d3.max(\n      country.values,\n      d => d[METRICS[\"hdi\"][\"display\"]]\n    );\n    country[METRICS[\"efree\"].sortable] = d3.max(\n      country.values,\n      d => d[METRICS[\"efree\"][\"display\"]]\n    );\n  });\n  return data;\n}\n\n/**\n *\n */\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      dataGrouped: [],\n      focusYear: 2017,\n      scatterHover: null,\n      configs: {\n        dataDisplay: \"hdi_gdp\",\n        sortOrder: \"gdp\",\n        scale: \"local\"\n      },\n      colorScale: d3.scaleSequential(d3.interpolateOranges).domain([1990, 2020])\n    };\n\n    this.handleScatterHover = this.handleScatterHover.bind(this);\n    this.handleConfigClick = this.handleConfigClick.bind(this);\n  }\n\n  /**\n   *\n   * @param {*} hoverData\n   */\n  handleScatterHover(hoverData) {\n    const { scatterHover } = this.state;\n\n    if (hoverData) {\n      if (!scatterHover || !scatterHover.values.includes(hoverData.key)) {\n        this.setState({ scatterHover: { values: [hoverData.key] } });\n      }\n    } else {\n      this.setState({ scatterHover: null });\n    }\n  }\n\n  handleConfigClick(configId, valueId) {\n    const { configs } = this.state;\n    configs[configId] = valueId;\n    this.setState({ configs });\n  }\n\n  /**\n   *\n   */\n  componentDidMount() {\n    getData()\n      .then(processData)\n      .then(data => {\n        let dataGrouped = groupData(data);\n        dataGrouped = processGroupedData(dataGrouped);\n        this.setState({ data, dataGrouped });\n      });\n  }\n\n  /**\n   *\n   */\n  renderScatterGNIvsKDI() {\n    const { data, focusYear, scatterHover } = this.state;\n    const displayData = data.filter(d => d.year === focusYear);\n    const yFunc = d => d.hdi;\n    const xFunc = d => d.gdp_per_cap;\n\n    const xLabel = \"GDP per Capita\";\n    const yLabel = \"Human Development Index\";\n\n    const tooltipTextFunc = d => {\n      const tooltipData = { [xLabel]: xFunc(d), [yLabel]: yFunc(d) };\n      return tableContent(tooltipData, {\n        title: d.country,\n        valueFormat: formatNumber\n      });\n    };\n\n    return (\n      <AutoWidth>\n        <ScatterPlot\n          data={displayData}\n          xFunc={xFunc}\n          yFunc={yFunc}\n          xLabel={xLabel}\n          yLabel={yLabel}\n          hoverData={scatterHover}\n          tooltipTextFunc={tooltipTextFunc}\n          onHover={this.handleScatterHover}\n        />\n      </AutoWidth>\n    );\n  }\n\n  /**\n   *\n   */\n  renderScatterGNIvsEfree() {\n    const { data, focusYear, scatterHover } = this.state;\n    const displayData = data.filter(d => d.year === focusYear);\n    const xFunc = d => d.gdp_per_cap;\n    const yFunc = d => d.efree;\n\n    const xLabel = \"GDP per capita\";\n    const yLabel = \"Economic Freedom Score\";\n\n    const tooltipTextFunc = d => {\n      const tooltipData = { [xLabel]: xFunc(d), [yLabel]: yFunc(d) };\n      return tableContent(tooltipData, {\n        title: d.country,\n        valueFormat: formatNumber\n      });\n    };\n\n    return (\n      <AutoWidth>\n        <ScatterPlot\n          data={displayData}\n          xFunc={xFunc}\n          yFunc={yFunc}\n          xLabel={xLabel}\n          yLabel={yLabel}\n          hoverData={scatterHover}\n          tooltipTextFunc={tooltipTextFunc}\n          onHover={this.handleScatterHover}\n        />\n      </AutoWidth>\n    );\n  }\n\n  /**\n   *\n   */\n  renderSmallMult() {\n    const { dataGrouped, configs, colorScale } = this.state;\n\n    const [yMetric, xMetric] = configs.dataDisplay.split(\"_\");\n\n    return (\n      <SmallMultipleConnected\n        dataGrouped={dataGrouped}\n        xMetric={xMetric}\n        yMetric={yMetric}\n        scale={configs.scale}\n        sortOrder={configs.sortOrder}\n        colorScale={colorScale}\n      />\n    );\n  }\n\n  /**\n   *\n   */\n  renderConfigPanel() {\n    return <ConfigurePanel onClick={this.handleConfigClick} />;\n  }\n\n  /**\n   *\n   */\n  renderLegend() {\n    const { colorScale } = this.state;\n    return <ColorLegend colorScale={colorScale} domain={[2010, 2017]} />;\n  }\n\n  /**\n   *\n   */\n  render() {\n    const { dataGrouped } = this.state;\n    return (\n      <div className=\"App\">\n        <Container>\n          <Row>\n            <Col>\n              <div className=\"top-bar\">\n                <a\n                  className=\"align-middle float-right\"\n                  href=\"http://vallandingham.me/\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  vallandingham.me\n                </a>\n              </div>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h1>Good Government</h1>\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={2} />\n            <Col sm={9}>\n              <div className=\"line\" />\n              <p>\n                What makes a good government? Often when we think of successful\n                governments, we focus on the output of its people and its\n                mightiness when compared to its peers. But perhaps a more\n                important measure of a good government is its ability to provide\n                comfort and success to the individuals it governs.\n              </p>\n              <blockquote cite=\"Thomas Jefferson\">\n                The care of human life and happiness, and not their destruction,\n                is the first and only object of good government.\n              </blockquote>\n              <p>Something Something Something.</p>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h2>Quality of Life is Connected to Progress</h2>\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={2} />\n            <Col sm={9}>\n              <div className=\"line\" />\n              <p>But we don't have to have it only one way.</p>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={6}>{this.renderScatterGNIvsKDI()}</Col>\n            <Col md={6}>{this.renderScatterGNIvsEfree()}</Col>\n          </Row>\n          <Row>\n            <Col sm={2} />\n            <Col sm={9}>\n              <div className=\"blank\" />\n              <p>But that is not the whole story.</p>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h2>Progress of Countries</h2>\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={12}>\n              <div className=\"line\" />\n              {this.renderConfigPanel()}\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={5}>\n              <span className=\"align-middle\">\n                Showing data from 2010 to 2017 for {dataGrouped.length}{\" \"}\n                countries.\n              </span>\n            </Col>\n            <Col sm={6}>{this.renderLegend()}</Col>\n          </Row>\n          <Row>\n            <Col sm={12}>{this.renderSmallMult()}</Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./custom.scss\";\nimport \"./index.scss\";\nimport App from \"./components/App/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}