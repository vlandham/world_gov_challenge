(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(41)},29:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(6),r=a.n(i),l=(a(29),a(7)),c=a(8),s=a(9),u=a(12),h=a(10),d=a(11),m=a(3),p=a(4),v=a(5),f=a(20),y=a.n(f),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={width:e.defaultRenderWidth},e.debounceTime?a.updateWidth=y()(a.updateWidth.bind(Object(m.a)(Object(m.a)(a))),e.debounceTime):a.updateWidth=a.updateWidth.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateWidth(),window.addEventListener("resize",this.updateWidth)}},{key:"componentDidUpdate",value:function(){this.props.parentMayResize&&this.updateWidth()}},{key:"componentWillUnmount",value:function(){this.updateWidth.cancel(),window.removeEventListener("resize",this.updateWidth)}},{key:"getResizeDOMNode",value:function(){return r.a.findDOMNode(this)}},{key:"updateWidth",value:function(){var e=this.state.width,t=this.getResizeDOMNode().offsetWidth;e!==t&&this.setState({width:t})}},{key:"render",value:function(){var e=this.state.width;var t,a=this.props.children;return a&&null!=e&&(t=o.a.cloneElement(a,{width:this.state.width})),o.a.createElement("div",{className:"auto-width"},t)}}]),t}(n.Component);g.defaultProps={parentMayResize:!1,defaultRenderWidth:null,debounceTime:100};var b=g,x=a(21),O=a.n(x),k=a(14),w=a.n(k);var j=a(22);a(33);function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(t=Object(j.a)({},{title:null,keys:null,keyFormat:function(e){return e},valueFormat:function(e){return e}},t)).keys=t.keys||Object.keys(e);var a="<div>";return t.title&&(a+="<h2>".concat(t.title,"</h2>")),a+="<table><tbody>",a+=t.keys.map(function(a){return a in e?"<tr><td>".concat(t.keyFormat(a),"</td><td>").concat(t.valueFormat(e[a]),"</td></tr>"):""}).join(""),a+="</tbody></table></div>"}a(35);var S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={zooming:!1,showTable:!1},a.handleLassoSelect=a.handleLassoSelect.bind(Object(m.a)(Object(m.a)(a))),a.handleZoom=a.handleZoom.bind(Object(m.a)(Object(m.a)(a))),a.handleZoomingToggle=a.handleZoomingToggle.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOver=a.handleMouseOver.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOut=a.handleMouseOut.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOverCircle=a.handleMouseOverCircle.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOutCircle=a.handleMouseOutCircle.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setup()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"handleLassoSelect",value:function(e){this.props.onFilter(e)}},{key:"handleZoom",value:function(){var e=this.props,t=e.xAxis,a=e.yAxis,n=e.xFunc,o=e.yFunc,i=this.props,r=i.xScale,l=i.yScale;this.zoomTransform=p.d.transform,r=this.zoomTransform.rescaleX(r),l=this.zoomTransform.rescaleY(l),this.yAxis.call(a.scale(l)),this.xAxis.call(t.scale(r));this.highlightCircle(null),this.chart.selectAll(".dot").attr("cx",function(e){return r(n(e))}).attr("cy",function(e){return l(o(e))})}},{key:"handleZoomingToggle",value:function(){var e=this.state.zooming;this.setState({zooming:!e})}},{key:"highlightCircle",value:function(e){var t=this.props,a=t.xFunc,n=t.yFunc,o=t.colorScale,i=t.colorBy,r=t.tooltipTextFunc,l=t.onHover,c=this.props,s=c.xScale,u=c.yScale;s=this.zoomTransform.rescaleX(s),u=this.zoomTransform.rescaleY(u),e?(this.highlight.style("display","").style("stroke",o(e[i])).attr("cx",s(a(e))).attr("cy",u(n(e))),r&&this.tooltip.showTooltip(r(e),p.d)):(this.highlight.style("display","none"),this.tooltip.hideTooltip()),l&&l(e)}},{key:"handleMouseOver",value:function(e){var t=this.props,a=t.voronoiDiagram,n=t.mouseRadius,o=p.f(e);o=this.zoomTransform.invert(o);var i=a.find(o[0],o[1],n);this.highlightCircle(i&&i.data)}},{key:"handleMouseOut",value:function(){this.highlightCircle(null)}},{key:"handleMouseOverCircle",value:function(e){this.highlightCircle(e)}},{key:"handleMouseOutCircle",value:function(){this.highlightCircle(null)}},{key:"setup",value:function(){var e=this.props,t=e.zoomable,a=e.plotHeight,n=e.plotWidth,o=e.radius,i=e.exactMouse,r=p.h(this.root);this.g=r.append("g"),this.underlay=this.g.append("rect").classed("underlay",!0).attr("width",n).attr("height",a).style("fill","white");var l=this;i||this.underlay.on("mousemove",function(e){l.handleMouseOver(this,e)}).on("mouseleave",function(){l.handleMouseOut()}),t&&this.setupZoom(this.underlay),this.chart=this.g.append("g").classed("chart-group",!0),this.tooltip=function(e,t){var a=p.h("body").append("div").attr("class","tooltip").attr("id",e).html("");function n(){a.style("opacity",0).style("pointer-events","none")}function o(e){return Number(e.replace(/[^\d.-]/g,""))}function i(e){var t=o(a.style("width")),n=o(a.style("height")),i=window.scrollY,r=window.scrollX,l=document.all?e.clientX+r:e.pageX,c=document.all?e.clientY+i:e.pageY,s=l-r+70+t>window.innerWidth?l-t-35:l+35;s<r+35&&(s=r+35);var u=c-i-120+n>window.innerHeight?c-n- -120:c+-60;u<i+-60&&(u=c+-60),a.style("top",u+"px").style("left",s+"px")}return t&&a.style("width",t),n(),{showTooltip:function(e,t){a.style("opacity",1).style("pointer-events","all").html(e),i(t)},hideTooltip:n,updatePosition:i}}("_tooltip"),this.highlight=this.g.append("circle").attr("class","highlight-circle").attr("r",o+2).style("fill","none").style("display","none"),this.xAxis=this.g.append("g").classed("x-axis",!0),this.yAxis=this.g.append("g").classed("y-axis",!0),this.yAxisLabel=this.g.append("text").attr("class","axis-label").attr("text-anchor","middle"),this.xAxisLabel=this.g.append("text").attr("class","axis-label").attr("text-anchor","middle"),this.update()}},{key:"setupZoom",value:function(e){this.zoomTransform=p.k,this.zoom=p.j().scaleExtent([.25,8]).on("zoom",this.handleZoom),e.call(this.zoom)}},{key:"update",value:function(){var e=this.props.padding;this.g.attr("transform","translate(".concat(e.left," ").concat(e.top,")")),this.updateChart(),this.updateAxes()}},{key:"updateChart",value:function(){var e=this.props,t=e.data,a=e.selectedData,n=e.hoverData,o=e.xFunc,i=e.yFunc,r=e.colorValue,l=e.radius,c=e.exactMouse,s=this.props,u=s.xScale,h=s.yScale;u=this.zoomTransform.rescaleX(u),h=this.zoomTransform.rescaleY(h);var d=this.chart.selectAll(".dot").data(t.filter(function(e){return w()(o(e))&&w()(i(e))}),function(e){return e.key}),m=d.enter().append("circle").classed("dot",!0).merge(d);if(m.attr("cx",function(e){return u(o(e))}).attr("cy",function(e){return h(i(e))}).attr("r",l).attr("fill",r),c?m.on("mouseover",this.handleMouseOverCircle).on("mouseout",this.handleMouseOutCircle):m.style("pointer-events","none"),m.classed("highlight",!1).classed("dim",!1).classed("selected",!1),n&&n.values.length>0){var p=function(e){return n.values.includes(e.key)};m.classed("highlight",!1).classed("dim",!0).filter(p).classed("highlight",!0).classed("dim",!1).raise().filter(p).classed("selected",!0).raise()}a&&a.values&&a.values.length>0&&m.filter(function(e){return e[a.key]&&(t=e[a.key],n=a.values,!(!t||!n)&&(Array.isArray(t)||(t=[t]),t.some(function(e){return n.includes(e)})));var t,n}).classed("highlight",!0).classed("dim",!1).raise(),d.exit().remove()}},{key:"updateAxes",value:function(){var e=this.props,t=e.xAxis,a=e.yAxis,n=e.xLabel,o=e.yLabel,i=e.plotHeight,r=e.plotWidth,l=e.padding,c=this.props,s=c.xScale,u=c.yScale;s=this.zoomTransform.rescaleX(s),u=this.zoomTransform.rescaleY(u),this.xAxis.attr("transform","translate(".concat(0,", ",i,")")).call(t.scale(s)),this.yAxis.call(a.scale(u)),this.yAxisLabel.attr("transform","rotate(270) translate(".concat(-i/2," ").concat(18-l.left,")")).text(o),this.xAxisLabel.attr("transform","translate(".concat(r/2," ").concat(i+l.top+l.bottom/3,")")).text(n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.height,n=t.width,i={height:a};return o.a.createElement("div",{className:"ScatterPlot"},o.a.createElement("div",{className:"chart-brush",style:i},o.a.createElement("svg",{className:"chart",ref:function(t){e.root=t},height:a,width:n})))}}]),t}(n.PureComponent);S.defaultProps={data:[],name:"scatter",brushable:!0,colorByFunc:function(){},height:400,hoverData:null,selectedData:null,width:300,onFilter:function(){},colorScale:function(){return"#ddd"},xFunc:function(e){return e.x},yFunc:function(e){return e.y},radius:4,xLabel:"",yLabel:"",zoomable:!0,exactMouse:!1};var M=O()(function(e){var t=e.data,a=e.height,n=e.width,o=e.xFunc,i=e.yFunc,r=e.colorByFunc,l=e.colorScale,c=e.exactMouse,s={top:20,right:20,bottom:50,left:60},u=n-s.left-s.right,h=a-s.top-s.bottom,d=p.e(t,o),m=p.g().domain(d).range([0,u]),v=p.e(t,i),f=p.g().domain(v).range([h,0]),y=function(e){return m(o(e))},g=function(e){return f(i(e))},b=p.b(f).tickSizeOuter(0),x=p.a(m).tickSizeOuter(0),O=p.i()([]);if(!c){var k=function(){return Math.random()-.5};O=p.i().x(function(e){return y(e)+k()}).y(function(e){return g(e)+k()}).size([u,h])(t)}return{plotWidth:u,plotHeight:h,padding:s,colorValue:function(e){return r(e)?l(r(e)):"#888"},xScale:m,yScale:f,xValue:y,yValue:g,xAxis:x,yAxis:b,voronoiDiagram:O,mouseRadius:u/10}})(S);function z(e,t){return Number("".concat(Math.round("".concat(e,"e").concat(t)),"e-").concat(t))}function F(e){e||(e=0);for(var t=(e=+e+"").split("."),a=t[0],n=t.length>1?".".concat(t[1]):"",o=/(\d+)(\d{3})/;o.test(a);)a=a.replace(o,"$1,$2");return a+n}function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e||(e=0),e>999999999?(e=z(e/1e9,1),"".concat(F(e),"B")):e>999999?(e=z(e/1e6,1),"".concat(F(e),"M")):e>999&&t?(e=z(e/1e3,1),"".concat(F(e),"K")):F(e)}a(37);var A=["country","iso3c","iso2c"],N="NA";function W(e){return e.forEach(function(e){Object.keys(e).forEach(function(t){A.includes(t)||(e[t]=e[t]===N?null:+e[t])}),e.key="".concat(e.country,":").concat(e.year)}),e}var C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={data:[],focusYear:2017,scatterHover:null},a.handleScatterHover=a.handleScatterHover.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleScatterHover",value:function(e){var t=this.state.scatterHover;e?t&&t.values.includes(e.key)||this.setState({scatterHover:{values:[e.key]}}):this.setState({scatterHover:null})}},{key:"componentDidMount",value:function(){var e=this;(function(){var e="".concat("/world_gov_challenge","/data/gov_data_year.csv");return p.c(e)})().then(W).then(function(t){console.log(t),e.setState({data:t})})}},{key:"renderScatterGNIvsKDI",value:function(){var e=this.state,t=e.data,a=e.focusYear,n=e.scatterHover,i=t.filter(function(e){return e.year===a}),r=function(e){return e.gni_per_cap},c=function(e){return e.hdi},s="Human Development Index";return o.a.createElement(b,null,o.a.createElement(M,{data:i,xFunc:r,yFunc:c,xLabel:"GNI per capita",yLabel:s,hoverData:n,tooltipTextFunc:function(e){var t;return E((t={},Object(l.a)(t,"GNI per capita",r(e)),Object(l.a)(t,s,c(e)),t),{title:e.country,valueFormat:T})},onHover:this.handleScatterHover}))}},{key:"renderScatterGNIvsEfree",value:function(){var e=this.state,t=e.data,a=e.focusYear,n=e.scatterHover,i=t.filter(function(e){return e.year===a}),r=function(e){return e.gni_per_cap},c=function(e){return e.efree},s="Economic Freedom Score";return o.a.createElement(b,null,o.a.createElement(M,{data:i,xFunc:r,yFunc:c,xLabel:"GNI per capita",yLabel:s,hoverData:n,tooltipTextFunc:function(e){var t;return E((t={},Object(l.a)(t,"GNI per capita",r(e)),Object(l.a)(t,s,c(e)),t),{title:e.country,valueFormat:T})},onHover:this.handleScatterHover}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v.b,null,o.a.createElement(v.c,null,o.a.createElement(v.a,null,o.a.createElement("p",{className:"small-blue-title"},"Visualization"),o.a.createElement("h1",null,"Good Government"))),o.a.createElement(v.c,null,o.a.createElement(v.a,{sm:2}),o.a.createElement(v.a,{sm:9},o.a.createElement("div",{className:"line"}),o.a.createElement("p",null,"What makes a good government? Some would say this is a good question."),o.a.createElement("p",null,"What makes a good government? Some would say this is a good question."))),o.a.createElement(v.c,null,o.a.createElement(v.a,{md:5},this.renderScatterGNIvsKDI()),o.a.createElement(v.a,{md:5},this.renderScatterGNIvsEfree())),o.a.createElement(v.c,null,o.a.createElement(v.a,{sm:2}),o.a.createElement(v.a,{sm:9},o.a.createElement("div",{className:"blank"}),o.a.createElement("p",null,"But that is not the whole story.")))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.cd297cf3.chunk.js.map