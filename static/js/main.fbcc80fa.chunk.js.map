{"version":3,"sources":["components/AutoWidth/AutoWidth.js","components/tooltip/tooltip.js","components/ScatterPlot/ScatterPlot.js","utils/collection.js","utils/format.js","components/ConnectedScatterPlot/ConnectedScatterPlot.js","constants.js","components/SmallMultipleConnected/SmallMultipleConnected.js","components/ConfigurePanel/ConfigurePanel.js","components/App/App.js","serviceWorker.js","index.js"],"names":["AutoWidth","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","width","defaultRenderWidth","debounceTime","updateWidth","debounce","bind","assertThisInitialized","window","addEventListener","parentMayResize","cancel","removeEventListener","ReactDOM","findDOMNode","domWidth","getResizeDOMNode","offsetWidth","setState","childToRender","child","children","React","cloneElement","react_default","a","createElement","className","Component","defaultProps","tableContent","entries","config","arguments","length","undefined","objectSpread","title","keys","keyFormat","k","valueFormat","v","output","concat","map","join","floatingTooltip","tooltipId","tt","d3","append","attr","html","hideTooltip","style","toNum","str","Number","replace","updatePosition","event","ttw","tth","wscrY","scrollY","wscrX","scrollX","curX","document","all","clientX","pageX","curY","clientY","pageY","ttleft","xOffset","innerWidth","tttop","yOffset","innerHeight","showTooltip","content","ScatterPlot","zooming","showTable","handleLassoSelect","handleZoom","handleZoomingToggle","handleMouseOver","handleMouseOut","handleMouseOverCircle","handleMouseOutCircle","setup","update","d","onFilter","_this$props","xAxis","yAxis","xFunc","yFunc","_this$props2","xScale","yScale","zoomTransform","transform","rescaleX","rescaleY","scale","highlightCircle","chart","selectAll","_this$props3","colorScale","colorBy","tooltipTextFunc","onHover","_this$props4","highlight","tooltip","el","_this$props5","voronoiDiagram","mouseRadius","mousePos","invert","site","find","data","_this$props6","zoomable","plotHeight","plotWidth","radius","exactMouse","cRoot","root","g","underlay","classed","that","on","setupZoom","yAxisLabel","xAxisLabel","zoom","scaleExtent","padding","left","top","updateChart","updateAxes","_this$props7","selectedData","hoverData","colorValue","_this$props8","binding","filter","datum","isfinite","key","merged","enter","merge","values","hoverFilter","includes","raise","collection","list","Array","isArray","some","r","exit","remove","_this$props9","xLabel","yLabel","_this$props10","text","bottom","_this2","_this$props11","height","ref","node","PureComponent","name","brushable","colorByFunc","x","y","addComputedProps","right","xExtent","domain","range","yExtent","xValue","yValue","tickSizeOuter","pixelJitter","Math","random","size","roundNumber","value","decimals","round","addCommas","nStr","split","x1","x2","rgx","test","formatNumber","number","thousand","ConnectedScatterPlot","handleMouseover","handleMouseout","dataFiltered","changeInclude","METRICS","hdi","label","display","global","local","gni","efree","year","EXTENT","SmallMultipleScatter","chartData","zFunc","zLabel","xMetric","yMetric","components_AutoWidth_AutoWidth","components_ConnectedScatterPlot_ConnectedScatterPlot","dataGrouped","renderChart","sortOrder","country","console","log","_tooltipData","defineProperty","DROPDOWNS","dataDisplay","options","id","ConfigurePanel","toggle","dropdownOpen","selectIndex","dropdownId","prevState","dropdownState","items","reactstrap_es","isOpen","caret","renderDropdown","STRING_COLUMNS","NULL_STRING","normalizeMinMax","normAttr","minData","maxData","forEach","processData","App","focusYear","scatterHover","handleScatterHover","changesPath","process","getData","then","_this$state","displayData","gni_per_cap","components_ScatterPlot_ScatterPlot","_this$state2","_tooltipData2","SmallMultipleConnected_SmallMultipleConnected","sm","cite","md","renderScatterGNIvsKDI","renderScatterGNIvsEfree","components_ConfigurePanel_ConfigurePanel","renderSmallMult","Boolean","location","hostname","match","render","components_App_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fbcc80fa.chunk.js","sourcesContent":["/**\n * @copyright 2018 Zymergen\n */\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport debounce from 'lodash.debounce';\n\nconst propTypes = {\n  children: PropTypes.object,\n\n  /* The amount of delay between debounced calls (default: 100) */\n  debounceTime: PropTypes.number,\n\n  /* If set, the default width is set to this value and the child is\n     rendered. If null, the child is not rendered until a width is provided */\n  defaultRenderWidth: PropTypes.number,\n\n  /* If true, the component checks on componentDidUpdate to see if it needs to resize */\n  parentMayResize: PropTypes.bool,\n};\n\nconst defaultProps = {\n  parentMayResize: false,\n  defaultRenderWidth: null,\n  debounceTime: 100,\n};\n\n/**\n * Component for automatically setting a width prop to the DOM\n * node of the first child. Note that checking offsetWidth is a\n * somewhat expensive operation (forced reflow), so try and leave\n * `parentMayResize` false if you are having performance issues.\n *\n * Example usage:\n * <AutoWidth>\n *   <MyComponent />\n * </AutoWidth>\n *\n * MyComponent gets a `width` prop set.\n *\n */\nclass AutoWidth extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      width: props.defaultRenderWidth,\n    };\n\n    if (props.debounceTime) {\n      this.updateWidth = debounce(this.updateWidth.bind(this), props.debounceTime);\n    } else {\n      this.updateWidth = this.updateWidth.bind(this);\n    }\n  }\n\n  componentDidMount() {\n    this.updateWidth();\n    window.addEventListener('resize', this.updateWidth);\n  }\n\n  componentDidUpdate() {\n    const { parentMayResize } = this.props;\n\n    // have to update width of the parent can cause a resize without a window resize\n    // e.g. something collapses or expands.\n    if (parentMayResize) {\n      this.updateWidth();\n    }\n  }\n\n  componentWillUnmount() {\n    this.updateWidth.cancel();\n    window.removeEventListener('resize', this.updateWidth);\n  }\n\n  getResizeDOMNode() {\n    return ReactDOM.findDOMNode(this);\n  }\n\n  // Call set state to update the width so it starts an update of the child component\n  updateWidth() {\n    const { width } = this.state;\n    const domWidth = this.getResizeDOMNode().offsetWidth;\n    if (width !== domWidth) {\n      this.setState({\n        width: domWidth,\n      });\n    }\n  }\n\n  render() {\n    const { width } = this.state;\n\n    if (process.env.NODE_ENV !== 'production' && React.Children.count(this.props.children) > 1) {\n      console.warn('AutoWidth only works with a single child element.');\n    }\n\n    const child = this.props.children;\n    let childToRender;\n\n    // if we have a child and a width is provided, render the child with the width as a prop\n    if (child && width != null) {\n      childToRender = React.cloneElement(child, { width: this.state.width });\n    }\n\n    // we rely on this div getting the full width from the browser's layout\n    // and read its offsetWidth to set as the width to the child component.\n    return <div className=\"auto-width\">{childToRender}</div>;\n  }\n}\n\nAutoWidth.propTypes = propTypes;\nAutoWidth.defaultProps = defaultProps;\n\nexport default AutoWidth;\n","import * as d3 from \"d3\";\nimport \"./tooltip.scss\";\n\n/**\n * Format an object into a table for tooltip output.\n *\n * @param {Object} entries Object of items to display as a tooltip table.\n * @param {Object} config Configuration object that modifies the table generation.\n *  Possible values are:\n *  title: optional title for table\n *  keys: if provided, only display data from entries associated with these keys.\n *    This also can be used to specify the order of the data in the table.\n *    If not provided, all keys from `entries` are displayed.\n *  keyFormat: formatting function that takes a key and outputs a string to be displayed.\n *  valueFormat: formatting function that takes a value and outputs a string to be displayed.\n */\nexport function tableContent(entries, config = {}) {\n  const defaultConfig = {\n    title: null,\n    keys: null,\n    keyFormat: k => k,\n    valueFormat: v => v\n  };\n  config = { ...defaultConfig, ...config };\n  config.keys = config.keys || Object.keys(entries);\n  let output = \"<div>\";\n  if (config.title) {\n    output += `<h2>${config.title}</h2>`;\n  }\n  output += \"<table><tbody>\";\n  const rows = config.keys.map(k => {\n    if (k in entries) {\n      return `<tr><td>${config.keyFormat(k)}</td><td>${config.valueFormat(\n        entries[k]\n      )}</td></tr>`;\n    }\n    return \"\";\n  });\n  output += rows.join(\"\");\n  output += \"</tbody></table></div>\";\n  return output;\n}\n\n/**\n * Format an object into a series of spans for tooltip output.\n *\n * @param {Object} entries\n * @param {Function} keyFormat\n */\nexport function spanContent(entries) {\n  const content = Object.keys(entries).map(k => {\n    return `<span class='name'>${k}: </span><span class='value'>${\n      entries[k]\n    }</span>`;\n  });\n\n  return content.join(\"<br/>\");\n}\n\n/*\n * Creates tooltip with provided id that\n * floats on top of visualization.\n * Most styling is expected to come from CSS\n * so check out bubble_chart.scss for more details.\n */\nexport function floatingTooltip(tooltipId, width) {\n  // Local variable to hold tooltip div for\n  // manipulation in other functions.\n  var tt = d3\n    .select(\"body\")\n    .append(\"div\")\n    .attr(\"class\", \"tooltip\")\n    .attr(\"id\", tooltipId)\n    .html(\"\");\n\n  // Set a width if it is provided.\n  if (width) {\n    tt.style(\"width\", width);\n  }\n\n  // Initially it is hidden.\n  hideTooltip();\n\n  /*\n   * Display tooltip with provided content.\n   *\n   * content is expected to be HTML string.\n   *\n   * event is d3.event for positioning.\n   */\n  function showTooltip(content, event) {\n    tt.style(\"opacity\", 1.0)\n      .style(\"pointer-events\", \"all\")\n      .html(content);\n\n    updatePosition(event);\n  }\n\n  /*\n   * Hide the tooltip div.\n   */\n  function hideTooltip() {\n    tt.style(\"opacity\", 0.0).style(\"pointer-events\", \"none\");\n  }\n\n  function toNum(str) {\n    return Number(str.replace(/[^\\d.-]/g, \"\"));\n  }\n\n  /*\n   * Figure out where to place the tooltip\n   * based on d3 mouse evenggt.\n   */\n  function updatePosition(event) {\n    var xOffset = 35;\n    var yOffset = -60;\n\n    var ttw = toNum(tt.style(\"width\"));\n    var tth = toNum(tt.style(\"height\"));\n\n    var wscrY = window.scrollY;\n    var wscrX = window.scrollX;\n\n    var curX = document.all ? event.clientX + wscrX : event.pageX;\n    var curY = document.all ? event.clientY + wscrY : event.pageY;\n    var ttleft =\n      curX - wscrX + xOffset * 2 + ttw > window.innerWidth\n        ? curX - ttw - xOffset\n        : curX + xOffset;\n\n    if (ttleft < wscrX + xOffset) {\n      ttleft = wscrX + xOffset;\n    }\n\n    var tttop =\n      curY - wscrY + yOffset * 2 + tth > window.innerHeight\n        ? curY - tth - yOffset * 2\n        : curY + yOffset;\n\n    if (tttop < wscrY + yOffset) {\n      tttop = curY + yOffset;\n    }\n\n    tt.style(\"top\", tttop + \"px\").style(\"left\", ttleft + \"px\");\n  }\n\n  return {\n    showTooltip: showTooltip,\n    hideTooltip: hideTooltip,\n    updatePosition: updatePosition\n  };\n}\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport addComputedProps from \"react-computed-props\";\nimport isfinite from \"lodash.isfinite\";\nimport * as d3 from \"d3\";\n\nimport { includesAny } from \"../../utils/collection\";\nimport { floatingTooltip } from \"../tooltip/tooltip\";\n\nimport \"./ScatterPlot.scss\";\n\nfunction chartProps(props) {\n  const {\n    data,\n    height,\n    width,\n    xFunc,\n    yFunc,\n    colorByFunc,\n    colorScale,\n    exactMouse\n  } = props;\n\n  const padding = {\n    top: 20,\n    right: 20,\n    bottom: 50,\n    left: 60\n  };\n\n  const plotWidth = width - padding.left - padding.right;\n  const plotHeight = height - padding.top - padding.bottom;\n\n  const xExtent = d3.extent(data, xFunc);\n  const xScale = d3\n    .scaleLinear()\n    .domain(xExtent)\n    .range([0, plotWidth]);\n\n  const yExtent = d3.extent(data, yFunc);\n  const yScale = d3\n    .scaleLinear()\n    .domain(yExtent)\n    .range([plotHeight, 0]);\n\n  const xValue = d => xScale(xFunc(d));\n  const yValue = d => yScale(yFunc(d));\n  const colorValue = d =>\n    colorByFunc(d) ? colorScale(colorByFunc(d)) : \"#888\";\n\n  const yAxis = d3.axisLeft(yScale).tickSizeOuter(0);\n  const xAxis = d3.axisBottom(xScale).tickSizeOuter(0);\n\n  let voronoiDiagram = d3.voronoi()([]);\n\n  if (!exactMouse) {\n    const pixelJitter = () => Math.random() - 0.5;\n    voronoiDiagram = d3\n      .voronoi()\n      .x(d => xValue(d) + pixelJitter())\n      .y(d => yValue(d) + pixelJitter())\n      .size([plotWidth, plotHeight])(data);\n  }\n\n  const mouseRadius = plotWidth / 10;\n\n  return {\n    plotWidth,\n    plotHeight,\n    padding,\n    colorValue,\n    xScale,\n    yScale,\n    xValue,\n    yValue,\n    xAxis,\n    yAxis,\n    voronoiDiagram,\n    mouseRadius\n  };\n}\n\n/**\n * Scatter Plot component used to visualize two variables in the same chart.\n * Provides brushing capabilities for selecting subsets of data points.\n * Also provides zooming and hovering capabilities.\n */\nclass ScatterPlot extends PureComponent {\n  static propTypes = {\n    /**\n     * Boolean to enable/disable brushing interaction.\n     */\n    brushable: PropTypes.bool,\n\n    /**\n     * Function to extract attribute used to color dots with.\n     * Used in conjunction with `colorScale` a la:\n     * `colorScale(colorByFunc(d))`.\n     */\n    colorByFunc: PropTypes.func,\n\n    /**\n     * D3-style color scale function to color dots by.\n     */\n    colorScale: PropTypes.func,\n\n    /**\n     * Array of data objects to plot. x,y, and color values\n     * are extracted from each object in this array using\n     * xFunc, yFunc, and colorByFunc, respectively.\n     */\n    data: PropTypes.array,\n\n    /**\n     * A nice UX feature is when mousing over a plot,\n     * the nearest point to the mouse cursor can be detected\n     * using a voronoi diagram and its tooltip can be displayed\n     * without having to explicitly mouse onto that point.\n     * Unfortunately, these plots are flexible enough to allow data\n     * that is un-voronoi-able... causing crashing behavior. So,\n     * this approach (in certain contexts) needs to be abandoned.\n     * This boolean controls if 'exact mouse' (no voronoi) should\n     * be used for mouse-over or not.\n     * @default true\n     */\n    exactMouse: PropTypes.bool,\n\n    /**\n     * Height of component\n     */\n    height: PropTypes.number,\n\n    /**\n     * Values being hovered on.\n     */\n    hoverData: PropTypes.shape({\n      values: PropTypes.array\n    }),\n\n    /**\n     * Unique name of plot. Used for\n     * maximization interaction.\n     */\n    name: PropTypes.string,\n\n    /**\n     * Callback for brushing interaction.\n     */\n    onFilter: PropTypes.func,\n\n    /**\n     *\n     */\n    onHover: PropTypes.func,\n\n    /**\n     * Radius of dots.\n     * @default 4\n     */\n    radius: PropTypes.number,\n\n    /**\n     * Values selected.\n     */\n    selectedData: PropTypes.shape({\n      values: PropTypes.array\n    }),\n\n    /**\n     * Function used to generate tooltip text.\n     * function is provided data object.\n     */\n    tooltipTextFunc: PropTypes.func,\n\n    /**\n     * Width of component.\n     */\n    width: PropTypes.number,\n\n    /**\n     * Accessor function for x value of data object to display.\n     */\n    xFunc: PropTypes.func,\n\n    /**\n     * x-axis label.\n     */\n    xLabel: PropTypes.string,\n\n    /**\n     * Accessor function for y value of data object to display.\n     */\n    yFunc: PropTypes.func,\n\n    /**\n     * y-axis label.\n     */\n    yLabel: PropTypes.string,\n\n    /**\n     * Boolean controlling if chart is zoomable or not.\n     * @default true\n     */\n    zoomable: PropTypes.bool\n  };\n\n  static defaultProps = {\n    data: [],\n    name: \"scatter\",\n    brushable: true,\n    colorByFunc: () => {},\n    height: 400,\n    hoverData: null,\n    selectedData: null,\n    width: 300,\n    onFilter: () => {},\n    colorScale: () => \"#ddd\",\n    xFunc: d => d.x,\n    yFunc: d => d.y,\n    radius: 4,\n    xLabel: \"\",\n    yLabel: \"\",\n    zoomable: true,\n    exactMouse: false\n  };\n\n  /**\n   *\n   */\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      zooming: false,\n      showTable: false\n    };\n\n    this.handleLassoSelect = this.handleLassoSelect.bind(this);\n    this.handleZoom = this.handleZoom.bind(this);\n    this.handleZoomingToggle = this.handleZoomingToggle.bind(this);\n    this.handleMouseOver = this.handleMouseOver.bind(this);\n    this.handleMouseOut = this.handleMouseOut.bind(this);\n    this.handleMouseOverCircle = this.handleMouseOverCircle.bind(this);\n    this.handleMouseOutCircle = this.handleMouseOutCircle.bind(this);\n  }\n\n  /**\n   * When the react component mounts, setup the d3 vis\n   */\n  componentDidMount() {\n    this.setup();\n  }\n\n  /**\n   * When the react component updates, update the d3 vis\n   */\n  componentDidUpdate() {\n    this.update();\n  }\n\n  /**\n   *\n   */\n  handleLassoSelect(d) {\n    this.props.onFilter(d);\n  }\n\n  /**\n   *\n   */\n  handleZoom() {\n    const { xAxis, yAxis, xFunc, yFunc } = this.props;\n    let { xScale, yScale } = this.props;\n\n    // record zoom transform to be used in\n    // other interaction callbacks.\n    this.zoomTransform = d3.event.transform;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    this.yAxis.call(yAxis.scale(yScale));\n\n    this.xAxis.call(xAxis.scale(xScale));\n\n    const xValue = d => xScale(xFunc(d));\n    const yValue = d => yScale(yFunc(d));\n\n    this.highlightCircle(null);\n\n    this.chart\n      .selectAll(\".dot\")\n      .attr(\"cx\", xValue)\n      .attr(\"cy\", yValue);\n  }\n\n  /**\n   *\n   */\n  handleZoomingToggle() {\n    const { zooming } = this.state;\n    this.setState({\n      zooming: !zooming\n    });\n  }\n\n  /**\n   *\n   */\n  highlightCircle(d) {\n    const {\n      xFunc,\n      yFunc,\n      colorScale,\n      colorBy,\n      tooltipTextFunc,\n      onHover\n    } = this.props;\n    let { xScale, yScale } = this.props;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    if (!d) {\n      this.highlight.style(\"display\", \"none\");\n      this.tooltip.hideTooltip();\n    } else {\n      this.highlight\n        .style(\"display\", \"\")\n        .style(\"stroke\", colorScale(d[colorBy]))\n        .attr(\"cx\", xScale(xFunc(d)))\n        .attr(\"cy\", yScale(yFunc(d)));\n      if (tooltipTextFunc) {\n        this.tooltip.showTooltip(tooltipTextFunc(d), d3.event);\n      }\n    }\n\n    if (onHover) {\n      onHover(d);\n    }\n  }\n\n  /**\n   *\n   */\n  handleMouseOver(el) {\n    const { voronoiDiagram, mouseRadius } = this.props;\n\n    let mousePos = d3.mouse(el);\n    mousePos = this.zoomTransform.invert(mousePos);\n    const site = voronoiDiagram.find(mousePos[0], mousePos[1], mouseRadius);\n    this.highlightCircle(site && site.data);\n  }\n\n  /**\n   *\n   */\n  handleMouseOut() {\n    this.highlightCircle(null);\n  }\n\n  /**\n   *\n   */\n  handleMouseOverCircle(d) {\n    this.highlightCircle(d);\n  }\n\n  /**\n   *\n   */\n  handleMouseOutCircle() {\n    this.highlightCircle(null);\n  }\n\n  /**\n   *\n   */\n  setup() {\n    const { zoomable, plotHeight, plotWidth, radius, exactMouse } = this.props;\n    const cRoot = d3.select(this.root);\n\n    this.g = cRoot.append(\"g\");\n\n    this.underlay = this.g\n      .append(\"rect\")\n      .classed(\"underlay\", true)\n      .attr(\"width\", plotWidth)\n      .attr(\"height\", plotHeight)\n      .style(\"fill\", \"white\");\n\n    const that = this;\n    if (!exactMouse) {\n      this.underlay\n        .on(\"mousemove\", function(d) {\n          that.handleMouseOver(this, d);\n        })\n        .on(\"mouseleave\", function() {\n          that.handleMouseOut();\n        });\n    }\n\n    if (zoomable) {\n      this.setupZoom(this.underlay);\n    }\n\n    this.chart = this.g.append(\"g\").classed(\"chart-group\", true);\n    this.tooltip = floatingTooltip(\"_tooltip\");\n\n    this.highlight = this.g\n      .append(\"circle\")\n      .attr(\"class\", \"highlight-circle\")\n      .attr(\"r\", radius + 2)\n      .style(\"fill\", \"none\")\n      .style(\"display\", \"none\");\n\n    this.xAxis = this.g.append(\"g\").classed(\"x-axis\", true);\n    this.yAxis = this.g.append(\"g\").classed(\"y-axis\", true);\n    this.yAxisLabel = this.g\n      .append(\"text\")\n      .attr(\"class\", \"axis-label\")\n      .attr(\"text-anchor\", \"middle\");\n\n    this.xAxisLabel = this.g\n      .append(\"text\")\n      .attr(\"class\", \"axis-label\")\n      .attr(\"text-anchor\", \"middle\");\n\n    this.update();\n  }\n\n  /**\n   *\n   */\n  setupZoom(underlay) {\n    this.zoomTransform = d3.zoomIdentity;\n\n    this.zoom = d3\n      .zoom()\n      .scaleExtent([1 / 4, 8])\n      .on(\"zoom\", this.handleZoom);\n\n    underlay.call(this.zoom);\n  }\n\n  /**\n   *\n   */\n  update() {\n    const { padding } = this.props;\n    this.g.attr(\"transform\", `translate(${padding.left} ${padding.top})`);\n\n    this.updateChart();\n    this.updateAxes();\n  }\n\n  /**\n   *\n   */\n  updateChart() {\n    const {\n      data,\n      selectedData,\n      hoverData,\n      xFunc,\n      yFunc,\n      colorValue,\n      radius,\n      exactMouse\n    } = this.props;\n\n    let { xScale, yScale } = this.props;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    const xValue = d => xScale(xFunc(d));\n    const yValue = d => yScale(yFunc(d));\n\n    const binding = this.chart\n      .selectAll(\".dot\")\n      .data(\n        data.filter(datum => isfinite(xFunc(datum)) && isfinite(yFunc(datum))),\n        datum => datum.key\n      );\n\n    const enter = binding\n      .enter()\n      .append(\"circle\")\n      .classed(\"dot\", true);\n\n    const merged = enter.merge(binding);\n\n    merged\n      .attr(\"cx\", xValue)\n      .attr(\"cy\", yValue)\n      .attr(\"r\", radius)\n      .attr(\"fill\", colorValue);\n\n    if (exactMouse) {\n      merged\n        .on(\"mouseover\", this.handleMouseOverCircle)\n        .on(\"mouseout\", this.handleMouseOutCircle);\n    } else {\n      merged.style(\"pointer-events\", \"none\");\n    }\n\n    merged\n      .classed(\"highlight\", false)\n      .classed(\"dim\", false)\n      .classed(\"selected\", false);\n\n    if (hoverData && hoverData.values.length > 0) {\n      const hoverFilter = d => hoverData.values.includes(d.key);\n\n      merged\n        .classed(\"highlight\", false)\n        .classed(\"dim\", true)\n        .filter(hoverFilter)\n        .classed(\"highlight\", true)\n        .classed(\"dim\", false)\n        .raise()\n        .filter(hoverFilter)\n        .classed(\"selected\", true)\n        .raise();\n    }\n\n    if (selectedData && selectedData.values && selectedData.values.length > 0) {\n      merged\n        .filter(\n          d =>\n            d[selectedData.key] &&\n            includesAny(d[selectedData.key], selectedData.values)\n        )\n        .classed(\"highlight\", true)\n        .classed(\"dim\", false)\n        .raise();\n    }\n\n    binding.exit().remove();\n  }\n\n  /**\n   *\n   */\n  updateAxes() {\n    const {\n      xAxis,\n      yAxis,\n      xLabel,\n      yLabel,\n      plotHeight,\n      plotWidth,\n      padding\n    } = this.props;\n\n    let { xScale, yScale } = this.props;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    this.xAxis\n      .attr(\"transform\", `translate(${0}, ${plotHeight})`)\n      .call(xAxis.scale(xScale));\n\n    this.yAxis.call(yAxis.scale(yScale));\n\n    this.yAxisLabel\n      .attr(\n        \"transform\",\n        `rotate(270) translate(${-plotHeight / 2} ${-padding.left + 18})`\n      )\n      .text(yLabel);\n\n    this.xAxisLabel\n      .attr(\n        \"transform\",\n        `translate(${plotWidth / 2} ${plotHeight +\n          padding.top +\n          padding.bottom / 3})`\n      )\n      .text(xLabel);\n  }\n\n  /**\n   *\n   */\n  render() {\n    const { height, width } = this.props;\n\n    // keeps plot from overlapping on small screens - as\n    // elements are absolutely positioned within.\n    const style = { height: height };\n\n    return (\n      <div className=\"ScatterPlot\">\n        <div className=\"chart-brush\" style={style}>\n          <svg\n            className=\"chart\"\n            ref={node => {\n              this.root = node;\n            }}\n            height={height}\n            width={width}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default addComputedProps(chartProps)(ScatterPlot);\n","/**\n * Returns true if collection includes any in list\n * @param  {Array} collection Array of values to search\n * @param  {Array} list values to check for\n * @returns {Bool} true if collection contains any\n *  of the elements in list\n */\nexport function includesAny(collection, list) {\n  if (!collection || !list) {\n    return false;\n  }\n\n  if (!Array.isArray(collection)) {\n    collection = [collection];\n  }\n\n  // array.some tests whether at least one element\n  // in the array passes the test\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\n  return collection.some(r => list.includes(r));\n}\n","/**\n * Round a value to a given number of decimals\n * @param {Number} value Value to round.\n * @param {Number} decimals decimals to round to.\n * @return {Number} rounded number\n */\nexport function roundNumber(value, decimals) {\n  return Number(`${Math.round(`${value}e${decimals}`)}e-${decimals}`);\n}\n\n/**\n * Add commas to a number to make it look better\n * @param {Number} nStr to add commas to\n * @return {String} number with commas\n */\nexport function addCommas(nStr) {\n  if (!nStr) {\n    nStr = 0;\n  }\n  nStr = +nStr + \"\";\n  const x = nStr.split(\".\");\n  let x1 = x[0];\n  const x2 = x.length > 1 ? `.${x[1]}` : \"\";\n  const rgx = /(\\d+)(\\d{3})/;\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, \"$1,$2\");\n  }\n  return x1 + x2;\n}\n\n/**\n * @param {Number} number Number to format\n * @return {String} number with commas and M/B instaed of million / billion\n */\nexport function formatNumber(number, thousand = false) {\n  if (!number) {\n    number = 0;\n  }\n  if (number > 999999999) {\n    number = roundNumber(number / 1000000000.0, 1);\n    return `${addCommas(number)}B`;\n  } else if (number > 999999) {\n    number = roundNumber(number / 1000000.0, 1);\n    return `${addCommas(number)}M`;\n  } else if (number > 999 && thousand) {\n    number = roundNumber(number / 1000.0, 1);\n    return `${addCommas(number)}K`;\n  }\n  return addCommas(number);\n}\n","import React, { PureComponent } from \"react\";\nimport PropTypes from \"prop-types\";\nimport addComputedProps from \"react-computed-props\";\nimport * as d3 from \"d3\";\nimport isfinite from \"lodash.isfinite\";\nimport { floatingTooltip } from \"../tooltip/tooltip\";\n\nimport \"./ConnectedScatterPlot.scss\";\n\nfunction chartProps(props) {\n  const { data, xFunc, yFunc, height, width } = props;\n\n  let { xExtent, yExtent } = props;\n\n  const padding = {\n    top: 20,\n    right: 20,\n    bottom: 50,\n    left: 60\n  };\n\n  const plotWidth = width - padding.left - padding.right;\n  const plotHeight = height - padding.top - padding.bottom;\n\n  const dataFiltered = data.filter(\n    datum => isfinite(xFunc(datum)) && isfinite(yFunc(datum))\n  );\n\n  xExtent = xExtent || d3.extent(data, xFunc);\n  const xScale = d3\n    .scaleLinear()\n    .domain(xExtent)\n    .range([0, plotWidth]);\n\n  yExtent = yExtent || d3.extent(data, yFunc);\n  const yScale = d3\n    .scaleLinear()\n    .domain(yExtent)\n    .range([plotHeight, 0]);\n\n  const xValue = d => xScale(xFunc(d));\n  const yValue = d => yScale(yFunc(d));\n\n  const colorValue = d => \"#ddd\";\n\n  let voronoiDiagram = null;\n\n  if (data && data.length > 0) {\n    const pixelJitter = () => Math.random() - 0.5;\n    voronoiDiagram = d3\n      .voronoi()\n      .x(d => xValue(d) + pixelJitter())\n      .y(d => yValue(d) + pixelJitter())\n      .size([plotWidth, plotHeight])(data);\n  }\n\n  const mouseRadius = plotWidth / 3;\n\n  const yAxis = d3.axisLeft(yScale).tickSizeOuter(0);\n  const xAxis = d3.axisBottom(xScale).tickSizeOuter(0);\n\n  return {\n    dataFiltered,\n    padding,\n    plotHeight,\n    plotWidth,\n    xScale,\n    yScale,\n    xValue,\n    yValue,\n    colorValue,\n    voronoiDiagram,\n    mouseRadius,\n    xAxis,\n    yAxis\n  };\n}\n\n/**\n *\n */\nclass ConnectedScatterPlot extends PureComponent {\n  static propTypes = {\n    data: PropTypes.array,\n    name: PropTypes.string,\n    radius: PropTypes.number,\n    scale: PropTypes.string,\n    xFunc: PropTypes.func,\n    yFunc: PropTypes.func,\n    xLabel: PropTypes.string,\n    yLabel: PropTypes.string,\n    xExtent: PropTypes.array,\n    yExtent: PropTypes.array,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    tooltipTextFunc: PropTypes.func\n  };\n\n  static defaultProps = {\n    data: [],\n    radius: 4,\n    height: 300,\n    name: \"\",\n    xFunc: d => d.x,\n    yFunc: d => d.x,\n    xLabel: \"\",\n    yLabel: \"\",\n    tooltipTextFunc: d => \"\",\n    colorScale: () => \"#ddd\"\n  };\n\n  /**\n   *\n   */\n  constructor(props) {\n    super(props);\n\n    this.handleMouseover = this.handleMouseover.bind(this);\n    this.handleMouseout = this.handleMouseout.bind(this);\n  }\n\n  /**\n   * When the react component mounts, setup the d3 vis\n   */\n  componentDidMount() {\n    this.setup();\n  }\n\n  /**\n   * When the react component updates, update the d3 vis\n   */\n  componentDidUpdate() {\n    this.update();\n  }\n\n  /**\n   *\n   */\n  handleMouseover(el) {\n    const { voronoiDiagram, mouseRadius } = this.props;\n\n    let mousePos = d3.mouse(el);\n    mousePos = this.zoomTransform.invert(mousePos);\n    const site = voronoiDiagram.find(mousePos[0], mousePos[1], mouseRadius);\n    this.highlightCircle(site && site.data);\n  }\n\n  /**\n   *\n   */\n  handleMouseout(el) {\n    this.highlightCircle(null);\n  }\n\n  /**\n   *\n   */\n  highlightCircle(d) {\n    const {\n      xFunc,\n      yFunc,\n      colorScale,\n      colorBy,\n      tooltipTextFunc,\n      onHover\n    } = this.props;\n    let { xScale, yScale } = this.props;\n\n    xScale = this.zoomTransform.rescaleX(xScale);\n    yScale = this.zoomTransform.rescaleY(yScale);\n\n    if (!d) {\n      this.highlight.style(\"display\", \"none\");\n      this.tooltip.hideTooltip();\n    } else {\n      this.highlight\n        .style(\"display\", \"\")\n        .style(\"stroke\", colorScale(d[colorBy]))\n        .attr(\"cx\", xScale(xFunc(d)))\n        .attr(\"cy\", yScale(yFunc(d)));\n      if (tooltipTextFunc) {\n        this.tooltip.showTooltip(tooltipTextFunc(d), d3.event);\n      }\n    }\n\n    if (onHover) {\n      onHover(d);\n    }\n  }\n\n  /**\n   *\n   */\n  setup() {\n    const { plotWidth, plotHeight, radius } = this.props;\n\n    this.zoomTransform = d3.zoomIdentity;\n\n    const cRoot = d3.select(this.root);\n    this.g = cRoot.append(\"g\");\n\n    const that = this;\n    this.underlay = this.g\n      .append(\"rect\")\n      .classed(\"underlay\", true)\n      .attr(\"width\", plotWidth)\n      .attr(\"height\", plotHeight)\n      .style(\"fill\", \"white\")\n      .on(\"mousemove\", function(d) {\n        that.handleMouseover(this, d);\n      })\n      .on(\"mouseleave\", function() {\n        that.handleMouseout();\n      });\n    this.chart = this.g.append(\"g\").classed(\"chart-group\", true);\n    this.tooltip = floatingTooltip(\"_tooltip\");\n\n    this.highlight = this.g\n      .append(\"circle\")\n      .attr(\"class\", \"highlight-circle\")\n      .attr(\"r\", radius + 2)\n      .style(\"fill\", \"none\")\n      .style(\"pointer-events\", \"none\")\n      .style(\"display\", \"none\");\n\n    this.xAxis = this.g.append(\"g\").classed(\"x-axis\", true);\n    this.yAxis = this.g.append(\"g\").classed(\"y-axis\", true);\n    this.yAxisLabel = this.g\n      .append(\"text\")\n      .attr(\"class\", \"axis-label\")\n      .attr(\"text-anchor\", \"middle\");\n\n    this.xAxisLabel = this.g\n      .append(\"text\")\n      .attr(\"class\", \"axis-label\")\n      .attr(\"text-anchor\", \"middle\");\n\n    this.update();\n  }\n\n  /**\n   *\n   */\n  update() {\n    const { padding } = this.props;\n    this.g.attr(\"transform\", `translate(${padding.left} ${padding.top})`);\n\n    this.updateChart();\n    this.updateAxes();\n  }\n\n  /**\n   *\n   */\n  updateChart() {\n    const { dataFiltered, xValue, yValue, colorValue, radius } = this.props;\n\n    const binding = this.chart\n      .selectAll(\".dot\")\n      .data(dataFiltered, datum => datum.key);\n\n    const enter = binding\n      .enter()\n      .append(\"circle\")\n      .classed(\"dot\", true);\n\n    const merged = enter.merge(binding);\n\n    merged\n      .attr(\"cx\", xValue)\n      .attr(\"cy\", yValue)\n      .attr(\"r\", radius)\n      .attr(\"fill\", colorValue);\n    merged.style(\"pointer-events\", \"none\");\n\n    binding.exit().remove();\n  }\n\n  /**\n   *\n   */\n  updateAxes() {\n    const {\n      xAxis,\n      yAxis,\n      xLabel,\n      yLabel,\n      plotHeight,\n      plotWidth,\n      padding,\n      xScale,\n      yScale\n    } = this.props;\n\n    this.xAxis\n      .attr(\"transform\", `translate(${0}, ${plotHeight})`)\n      .call(xAxis.scale(xScale));\n\n    this.yAxis.call(yAxis.scale(yScale));\n\n    this.yAxisLabel\n      .attr(\n        \"transform\",\n        `rotate(270) translate(${-plotHeight / 2} ${-padding.left + 18})`\n      )\n      .text(yLabel);\n\n    this.xAxisLabel\n      .attr(\n        \"transform\",\n        `translate(${plotWidth / 2} ${plotHeight +\n          padding.top +\n          padding.bottom / 3})`\n      )\n      .text(xLabel);\n  }\n\n  /**\n   *\n   */\n  render() {\n    const { name, height, width } = this.props;\n\n    return (\n      <div className=\"ConnectedScatterPlot\">\n        <h4 className=\"title\">{name}</h4>\n        <svg\n          className=\"chart\"\n          ref={node => {\n            this.root = node;\n          }}\n          height={height}\n          width={width}\n        />\n      </div>\n    );\n  }\n}\n\nexport default addComputedProps(chartProps, {\n  changeInclude: [\"data\", \"width\", \"height\", \"xMetric\", \"yMetric\"]\n})(ConnectedScatterPlot);\n","export const METRICS = {\n  hdi: {\n    label: \"Human Development Index\",\n    display: \"hdi\",\n    global: \"hdi_norm\",\n    local: \"hdi_norm_local\"\n  },\n  gni: {\n    label: \"GNI per Capita\",\n    display: \"gni_per_cap\",\n    global: \"gni_norm\",\n    local: \"gni_norm_local\"\n  },\n  efree: {\n    label: \"Economic Freedom\",\n    display: \"efree\",\n    global: \"efree_norm\",\n    local: \"efree_norm_local\"\n  },\n  year: {\n    label: \"Year\",\n    display: \"year\"\n  }\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport addComputedProps from \"react-computed-props\";\nimport * as d3 from \"d3\";\nimport ConnectedScatterPlot from \"../ConnectedScatterPlot/ConnectedScatterPlot\";\n\nimport { tableContent } from \"../tooltip/tooltip\";\nimport { formatNumber } from \"../../utils/format\";\n\nimport \"./SmallMultipleConnected.scss\";\nimport AutoWidth from \"../AutoWidth/AutoWidth\";\n\nimport { METRICS } from \"../../constants\";\n\n/**\n *\n * @param {*} props\n */\nfunction chartProps(props) {\n  const { xMetric, yMetric, scale, sortOrder } = props;\n  const dataGrouped = d3\n    .nest()\n    .key(d => d.country)\n    .entries(props.data);\n\n  const zMetric = \"year\";\n  const xLabel = METRICS[xMetric].label;\n  const yLabel = METRICS[yMetric].label;\n  const zLabel = METRICS[zMetric].label;\n\n  const xFunc = d => d[METRICS[xMetric][scale]];\n  const yFunc = d => d[METRICS[yMetric][scale]];\n  const zFunc = d => d[METRICS[zMetric].display];\n\n  const tooltipTextFunc = d => {\n    const tooltipData = {\n      [xLabel]: d[METRICS[xMetric].display],\n      [yLabel]: d[METRICS[yMetric].display]\n    };\n    return tableContent(tooltipData, {\n      title: `${d.year}`,\n      valueFormat: formatNumber\n    });\n  };\n  console.log(dataGrouped);\n  return {\n    dataGrouped,\n    xLabel,\n    yLabel,\n    zLabel,\n    xFunc,\n    yFunc,\n    zFunc,\n    tooltipTextFunc\n  };\n}\n\nconst EXTENT = [0, 1];\n\n/**\n *\n */\nclass SmallMultipleScatter extends Component {\n  static propTypes = {\n    data: PropTypes.array,\n    scale: PropTypes.string,\n    sortOrder: PropTypes.string\n  };\n\n  static defaultProps = {\n    data: [],\n    xMetric: \"hdi\",\n    yMetric: \"gni\",\n    scale: \"global\"\n  };\n\n  renderChart(chartData) {\n    const {\n      xFunc,\n      yFunc,\n      zFunc,\n      xLabel,\n      yLabel,\n      zLabel,\n      tooltipTextFunc,\n      xMetric,\n      yMetric\n    } = this.props;\n    return (\n      <div key={chartData.key} className=\"small-multiple\">\n        <AutoWidth>\n          <ConnectedScatterPlot\n            key={chartData.key}\n            name={chartData.key}\n            data={chartData.values}\n            xFunc={xFunc}\n            yFunc={yFunc}\n            zFunc={zFunc}\n            xLabel={xLabel}\n            yLabel={yLabel}\n            zLabel={zLabel}\n            xExtent={EXTENT}\n            yExtent={EXTENT}\n            tooltipTextFunc={tooltipTextFunc}\n            xMetric={xMetric}\n            yMetric={yMetric}\n          />\n        </AutoWidth>\n      </div>\n    );\n  }\n\n  /**\n   *\n   */\n  render() {\n    const { dataGrouped } = this.props;\n    return (\n      <div className=\"SmallMultipleConnected\">\n        {dataGrouped.map(d => this.renderChart(d))}\n      </div>\n    );\n  }\n}\n\nexport default addComputedProps(chartProps)(SmallMultipleScatter);\n","import React, { Component } from \"react\";\nimport {\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from \"reactstrap\";\n\nimport \"./ConfigurePanel.scss\";\n\nconst DROPDOWNS = {\n  dataDisplay: {\n    options: [\n      { label: \"GNI vs HDI\", id: \"gni_hdi\" },\n      { label: \"GNI vs Economic Freedom\", id: \"gni_efree\" },\n      { label: \"HDI vs Economic Freedom\", id: \"hdi_efree\" }\n    ]\n  },\n  sortOrder: {\n    options: [{ label: \"Alphabetically\", id: \"alpha\" }]\n  },\n  scale: {\n    options: [\n      { label: \"Global\", id: \"global\" },\n      { label: \"Country-level\", id: \"local\" }\n    ]\n  }\n};\n\nclass ConfigurePanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = this.toggle.bind(this);\n    this.state = {\n      dataDisplay: { dropdownOpen: false, selectIndex: 0 },\n      sortOrder: { dropdownOpen: false, selectIndex: 0 },\n      scale: { dropdownOpen: false, selectIndex: 0 }\n    };\n  }\n\n  toggle(dropdownId) {\n    this.setState(prevState => {\n      const data = prevState[dropdownId];\n      data.dropdownOpen = !data.dropdownOpen;\n      return { [dropdownId]: data };\n    });\n  }\n\n  renderDropdown(dropdownId) {\n    const dropdownState = this.state[dropdownId];\n    const data = DROPDOWNS[dropdownId];\n    const items = data.options.map(d => (\n      <DropdownItem key={d.id}>{d.label}</DropdownItem>\n    ));\n\n    const display = data.options[dropdownState.selectIndex];\n\n    return (\n      <Dropdown\n        isOpen={this.state[dropdownId].dropdownOpen}\n        toggle={this.toggle.bind(this, dropdownId)}\n      >\n        <DropdownToggle caret>{display.label}</DropdownToggle>\n        <DropdownMenu>{items}</DropdownMenu>\n      </Dropdown>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"ConfigurePanel\">\n        Displaying {this.renderDropdown(\"dataDisplay\")} sorted{\" \"}\n        {this.renderDropdown(\"sortOrder\")} using a{\" \"}\n        {this.renderDropdown(\"scale\")} scale.\n      </div>\n    );\n  }\n}\nexport default ConfigurePanel;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport { Container, Row, Col } from \"reactstrap\";\n\nimport AutoWidth from \"../AutoWidth/AutoWidth\";\nimport ScatterPlot from \"../ScatterPlot/ScatterPlot\";\nimport { tableContent } from \"../tooltip/tooltip\";\nimport { formatNumber } from \"../../utils/format\";\nimport SmallMultipleConnected from \"../SmallMultipleConnected/SmallMultipleConnected\";\n\nimport \"./App.scss\";\nimport ConfigurePanel from \"../ConfigurePanel/ConfigurePanel\";\n\nfunction getData() {\n  const changesPath = `${process.env.PUBLIC_URL}/data/gov_data_year.csv`;\n  return d3.csv(changesPath);\n}\n\nconst STRING_COLUMNS = [\"country\", \"iso3c\", \"iso2c\"];\nconst NULL_STRING = \"NA\";\n\nfunction normalizeMinMax(data, attr, normAttr) {\n  const minData = d3.min(data, d => d[attr]);\n  const maxData = d3.max(data, d => d[attr]);\n  data.forEach(datum => {\n    datum[normAttr] = (datum[attr] - minData) / (maxData - minData);\n  });\n\n  return data;\n}\n\n/**\n *\n * @param {*} data\n */\nfunction processData(data) {\n  data.forEach(datum => {\n    Object.keys(datum).forEach(key => {\n      if (!STRING_COLUMNS.includes(key)) {\n        datum[key] = datum[key] === NULL_STRING ? null : +datum[key];\n      }\n    });\n\n    datum.key = `${datum.country}:${datum.year}`;\n  });\n\n  normalizeMinMax(data, \"hdi\", \"hdi_norm\");\n  normalizeMinMax(data, \"gni_per_cap\", \"gni_norm\");\n  normalizeMinMax(data, \"efree\", \"efree_norm\");\n\n  // nest by country to get normalized by country\n  const dataByCountry = d3\n    .nest()\n    .key(d => d.country)\n    .entries(data);\n\n  dataByCountry.forEach(country => {\n    normalizeMinMax(country.values, \"hdi\", \"hdi_norm_local\");\n    normalizeMinMax(country.values, \"gni_per_cap\", \"gni_norm_local\");\n    normalizeMinMax(country.values, \"efree\", \"efree_norm_local\");\n  });\n\n  return data;\n}\n\n/**\n *\n */\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      focusYear: 2017,\n      scatterHover: null\n    };\n\n    this.handleScatterHover = this.handleScatterHover.bind(this);\n  }\n\n  /**\n   *\n   * @param {*} hoverData\n   */\n  handleScatterHover(hoverData) {\n    const { scatterHover } = this.state;\n\n    if (hoverData) {\n      if (!scatterHover || !scatterHover.values.includes(hoverData.key)) {\n        this.setState({ scatterHover: { values: [hoverData.key] } });\n      }\n    } else {\n      this.setState({ scatterHover: null });\n    }\n  }\n\n  /**\n   *\n   */\n  componentDidMount() {\n    getData()\n      .then(processData)\n      .then(data => {\n        console.log(data);\n        this.setState({ data });\n      });\n  }\n\n  /**\n   *\n   */\n  renderScatterGNIvsKDI() {\n    const { data, focusYear, scatterHover } = this.state;\n    const displayData = data.filter(d => d.year === focusYear);\n    const xFunc = d => d.gni_per_cap;\n    const yFunc = d => d.hdi;\n\n    const xLabel = \"GNI per Capita\";\n    const yLabel = \"Human Development Index\";\n\n    const tooltipTextFunc = d => {\n      const tooltipData = { [xLabel]: xFunc(d), [yLabel]: yFunc(d) };\n      return tableContent(tooltipData, {\n        title: d.country,\n        valueFormat: formatNumber\n      });\n    };\n\n    return (\n      <AutoWidth>\n        <ScatterPlot\n          data={displayData}\n          xFunc={xFunc}\n          yFunc={yFunc}\n          xLabel={xLabel}\n          yLabel={yLabel}\n          hoverData={scatterHover}\n          tooltipTextFunc={tooltipTextFunc}\n          onHover={this.handleScatterHover}\n        />\n      </AutoWidth>\n    );\n  }\n\n  /**\n   *\n   */\n  renderScatterGNIvsEfree() {\n    const { data, focusYear, scatterHover } = this.state;\n    const displayData = data.filter(d => d.year === focusYear);\n    const xFunc = d => d.gni_per_cap;\n    const yFunc = d => d.efree;\n\n    const xLabel = \"GNI per capita\";\n    const yLabel = \"Economic Freedom Score\";\n\n    const tooltipTextFunc = d => {\n      const tooltipData = { [xLabel]: xFunc(d), [yLabel]: yFunc(d) };\n      return tableContent(tooltipData, {\n        title: d.country,\n        valueFormat: formatNumber\n      });\n    };\n\n    return (\n      <AutoWidth>\n        <ScatterPlot\n          data={displayData}\n          xFunc={xFunc}\n          yFunc={yFunc}\n          xLabel={xLabel}\n          yLabel={yLabel}\n          hoverData={scatterHover}\n          tooltipTextFunc={tooltipTextFunc}\n          onHover={this.handleScatterHover}\n        />\n      </AutoWidth>\n    );\n  }\n\n  renderSmallMult() {\n    const { data } = this.state;\n\n    return <SmallMultipleConnected data={data} />;\n  }\n\n  /**\n   *\n   */\n  render() {\n    return (\n      <div className=\"App\">\n        <Container>\n          <Row>\n            <Col>\n              <p className=\"small-blue-title\">Visualization</p>\n              <h1>Good Government</h1>\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={2} />\n            <Col sm={9}>\n              <div className=\"line\" />\n              <p>\n                What makes a good government? Often when we think of successful\n                governments, we focus on the output of its people and its\n                mightiness when compared to its peers. But perhaps a more\n                important measure of a good government is its ability to provide\n                comfort and success to the individuals it governs.\n              </p>\n              <blockquote cite=\"Thomas Jefferson\">\n                The care of human life and happiness, and not their destruction,\n                is the first and only object of good government.\n              </blockquote>\n              <p>Something Something Something.</p>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h2>Quality of Life is Connected to Progress</h2>\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={2} />\n            <Col sm={9}>\n              <div className=\"line\" />\n              <p>But we don't have to have it only one way.</p>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={6}>{this.renderScatterGNIvsKDI()}</Col>\n            <Col md={6}>{this.renderScatterGNIvsEfree()}</Col>\n          </Row>\n          <Row>\n            <Col sm={2} />\n            <Col sm={9}>\n              <div className=\"blank\" />\n              <p>But that is not the whole story.</p>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h2>Progress of Countries</h2>\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={12}>\n              <div className=\"line\" />\n              <ConfigurePanel />\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={12}>{this.renderSmallMult()}</Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./custom.scss\";\nimport \"./index.scss\";\nimport App from \"./components/App/App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}